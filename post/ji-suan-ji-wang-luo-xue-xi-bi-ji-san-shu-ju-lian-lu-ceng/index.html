<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Gridea静态个人博客">
<meta name="description" content="温故而知新">
<meta name="theme-color" content="#000">
<title>👾计算机网络学习笔记（三）--  数据链路层 | Keasar`Blog</title>
<link rel="shortcut icon" href="/favicon.ico?v=1591577877188">
<link rel="stylesheet" href="/media/css/mist.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/androidstudio.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>





  <meta name="description" content="👾计算机网络学习笔记（三）--  数据链路层" />
  <meta name="keywords" content="计算机网络" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="mist">
  <header class="header bg-color ">
    <div class="blog-header box-shadow-wrapper  " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="">
              <span class="logo-line-before">
                <i class=""></i>
              </span>
              <span class="main-title">Keasar`Blog</span>
              <span class="logo-line-after">
                <i class=""></i>
              </span>
            </a>  
          
        </div>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> 标签
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> 关于
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友情链接
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">搜索</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout mist bg-color">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper  right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">文章目录</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">站点概览</span>
          </div>
        </div>
      
      <div class="sidebar-body mist" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper ">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">Keasar</p>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">7</span>
        <span class="site-item-stat-name language" data-lan="article">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">3</span>
        <span class="site-item-stat-name language" data-lan="category">分类</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">3</span>
        <span class="site-item-stat-name language" data-lan="tag">标签</span>
      </a>
    </div>
  </div>
  
  


</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper  no_compress"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">1. 使用点对点信道的数据链路层</a></li>
<li><a href="#2-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp">2. 点对点协议 PPP</a><br>
*
<ul>
<li><a href="#ppp-%E5%8D%8F%E8%AE%AE%E5%B0%B1%E6%98%AF%E7%94%A8%E6%88%B7-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%92%8C-isp-%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%E6%97%B6%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE">PPP 协议就是用户 计算机和 ISP 进行通信时所使用的数据链路层协议。</a></li>
</ul>
</li>
<li><a href="#3-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3. 使用广播信道的数据链路层</a><br>
*
<ul>
<li><a href="#%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E9%80%9A%E4%BF%A1%E5%B1%80%E5%9F%9F%E7%BD%91%E5%85%B7%E6%9C%89%E5%B9%BF%E6%92%AD%E5%8A%9F%E8%83%BD%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%8A%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%8F%AF%E5%85%B1%E4%BA%AB%E8%BF%9E%E6%8E%A5%E5%9C%A8%E5%B1%80-%E5%9F%9F%E7%BD%91%E4%B8%8A%E7%9A%84%E5%90%84%E7%A7%8D%E7%A1%AC%E4%BB%B6%E5%92%8C%E8%BD%AF%E4%BB%B6%E8%B5%84%E6%BA%90">广播信道可以进行一对多的通信，局域网具有广播功能，局域网上的主机可共享连接在局 域网上的各种硬件和软件资源。</a></li>
<li><a href="#csmacd%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%A6%81%E7%82%B9">CSMA/CD协议的要点：</a></li>
<li><a href="#%E5%BC%BA%E5%8C%96%E7%A2%B0%E6%92%9E">强化碰撞：</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">总结：</a></li>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87">以太网的信道利用率</a></li>
</ul>
</li>
<li><a href="#4-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84mac%E5%B1%82">4. 以太网的MAC层</a></li>
<li><a href="#5-%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">5. 扩展的以太网</a><br>
*
<ul>
<li><a href="#%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%9C%A8%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9C%8B%E6%9D%A5%E4%BB%8D%E7%84%B6%E6%98%AF%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C">扩展的以太网在网络层看来仍然是一个网络。</a></li>
<li><a href="#%E7%BD%91%E6%A1%A5%E8%87%AA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95">网桥（自学习算法）</a></li>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AC%AC%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA-%E5%8D%B3%E5%A4%9A%E6%8E%A5%E5%8F%A3%E7%BD%91%E6%A1%A5%E5%BC%BA%E8%B0%83%E8%BF%99%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">以太网交换机（第二层交换机 ），即多接口网桥，强调这种交换机工作在数据链路层。</a></li>
</ul>
</li>
<li><a href="#6-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91">6. 高速以太网</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // 保存li元素
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // 处理不是从#一级标题开始目录
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <header class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/">
      👾计算机网络学习笔记（三）--  数据链路层
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">发布于</span>
      <span>2020-06-04</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show language" data-lan="category-in">分类于</span>
      
      
      <a href="https://qzlu-cyber.github.io/Keasar_Blog/tag/huZmcNfOq/">
        <span>计算机网络</span>
      </a>
      
      
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>20<span class="language" data-lan="minute">分钟</span></span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>5525<span class="pc-show language" data-lan="words">字数</span></span>
    </span>
    
    
    
    <span id="/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/" data-flag-title="👾计算机网络学习笔记（三）--  数据链路层" class="meta-item pc-show leancloud_visitors">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-eye"></i>
      <span><span class="language" data-lan="view">浏览量</span>：<span class="leancloud-visitors-count"></span></span>
    </span>
    
  </div>
</header>
            <div class="post-body next-md-body" id="post_body">
              <p>😀<a href="https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/">计算机网络学习笔记（一）--  计算机网络概述</a><br>
😃<a href="https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/">计算机网络学习笔记（二）--  物理层</a><br>
😃<a href="https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/">计算机网络学习笔记（四）--  网络层</a><br>
😃<a href="https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/">计算机网络学习笔记（五）--  运输层</a></p>
<p>数据链路层使用的信道有两种类型：</p>
<ul>
<li>点对点信道</li>
<li>广播信道</li>
</ul>
<!-- more -->
<h3 id="1-使用点对点信道的数据链路层">1. 使用点对点信道的数据链路层</h3>
<ol>
<li>
<p>数据链路和帧</p>
<ul>
<li>
<p><strong>链路</strong> ：从一个结点到相邻结点的一段物理线路。</p>
</li>
<li>
<p><strong>数据链路</strong> ：把实现这些协议的硬件和软件加载链路上。<br>
现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。一般的适配器都包括了数据链路层和物理层这两层的功能。</p>
</li>
<li>
<p><strong>帧</strong>：点对点信道的数据链路层的协议数据单元。</p>
</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://s1.ax1x.com/2020/06/04/t05kPf.png" alt="t05kPf.png" loading="lazy"></figure>
<ul>
<li><strong>点对点信道通信时的主要步骤</strong>：
<ol>
<li>结点 A 的数据链路层把网络层交下来的 IP 数据报添加首部和尾部封装成帧。</li>
<li>结点 A 把封装好的帧发送给结点 B 的数据链路层。</li>
<li>若结点 B 的数据链路层收到的帧无差错，则从收到的帧中提取出 IP 数据报交给上面的网络层；否则丢弃这个帧。</li>
</ol>
</li>
</ul>
</li>
<li>
<p>数据链路层三个基本问题：</p>
<ol>
<li>
<p>封装成帧</p>
<p>就是在一段数据的前后分别<strong>添加首部</strong>（帧开始符 SOH 01）和<strong>尾部</strong>（帧结束符 EOT 04），然后就构成了一个<strong>帧</strong>。（数据部分 &lt;= 长度限制 MTU）首部和尾部的一个重要作用就是进行帧定界。<br>
<strong>帧定界是分组交换的必然要求</strong>。</p>
<figure data-type="image" tabindex="2"><img src="https://s1.ax1x.com/2020/06/04/t0IK6e.png" alt="t0IK6e.png" loading="lazy"></figure>
<figure data-type="image" tabindex="3"><img src="https://s1.ax1x.com/2020/06/04/t0IJtP.png" alt="t0IJtP.png" loading="lazy"></figure>
</li>
<li>
<p>透明传输</p>
<p>为了达到透明传输（即传输的数据部分不会因为包含SOH和EOT而出错），在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(十六进制1B)<br>
<strong>透明传输避免消息符号与帧定界符号相混淆</strong>。</p>
<figure data-type="image" tabindex="4"><img src="https://s1.ax1x.com/2020/06/04/t0IxHA.png" alt="t0IxHA.png" loading="lazy"></figure>
</li>
<li>
<p>差错检测</p>
<p>现实通信链路中比特在传输中会产生差错，传输错误的比特占比称为<strong>误码率BER</strong>，为了保证可靠性，通常通过<strong>循环冗余检验CRC</strong>来做差错检测。<br>
<strong>差错检测防止无效数据帧浪费后续路由上的传输和处理资源</strong>。</p>
<p><strong>循环冗余检验CRC</strong>：</p>
<p>​		在发送端将数据分组，每组 <em>k</em> bit，在待传送数据 <em>M</em> (<em>k</em> bit) 后添加 <em>n</em> 位冗余码，构成一个帧发送出去，因此一共发送 <em>k+n</em> bit。</p>
<p>​		利用<strong>模二运算</strong>（不进位，不借位）计算 <em>2^n x M / P</em>, 即在待传送数据 <em>M</em> 后加 n 个0作为被除数，除以商定好的除数 <em>P</em>（比 n 多一位），得到的</p>
<p>余数 <em>R</em> （比 <em>n</em> 少一位）即为冗余码，将其拼接到数据 <em>M</em> 后发送出去。为了进行检错而添加的冗余码常称为帧检验序列 <em>FCS</em>。</p>
<p>​		在接收端把接收到的数据以帧为单位进行 CRC 检验：把收到的每一个帧都除以同样的 除数 <em>P</em>（模二运算），然后检查得到的余数 <em>R</em> 如果在传输过程中<strong>无差错，那么经过 CRC 检验后得出的余数肯定是0</strong>。</p>
<p>​		若 <em>M</em> = 101001(即<em>k</em> = 6)，除数 <em>P</em> = 1101, 还可表示为 <em>P(X) = X^3 + X^2 + 1</em>，此时被除数 <em>2^n x M</em> 为101001000除以 <em>P</em> 的余数 <em>R</em> 为001。因此加上 <em>FCS</em> 后发送的帧是 101001001。接收端被除数即为 101001001，除以除数 <em>P</em> 得到余数 <em>R</em>。若 <em>R</em> = 0，帧无错，接受；若 <em>R</em> ≠ 0，帧出错(无法判断哪一位出错)，丢弃。</p>
<p><strong>在数据链 路层使用 CRC 检验，能够实现无比特差错的传输，但这还不是可靠传输。</strong></p>
<p>对于通信质量良好的有线传输链路，不要求数据链路层向上提供可靠传输的服务。改正差错的任务就由上层协议（例如，运输层的 TCP 协议）来完成。 对于通信质量较差的无线传输链路，数据链路层协议使用确认和重传机制，数据链路层向上提供可靠传输的服务。</p>
</li>
</ol>
</li>
</ol>
<h3 id="2-点对点协议-ppp">2. 点对点协议 PPP</h3>
<h5 id="ppp-协议就是用户-计算机和-isp-进行通信时所使用的数据链路层协议">PPP 协议就是用户 计算机和 ISP 进行通信时所使用的数据链路层协议。</h5>
<figure data-type="image" tabindex="5"><img src="https://s1.ax1x.com/2020/06/04/tBaXtI.png" alt="tBaXtI.png" loading="lazy"></figure>
<!-- more -->
<!-- more -->
<p>在 TCP/IP 协议族中，可靠传输由运输层的 TCP 协议负责，因此数据链路层的 PPP 议不需要进行纠错，不需要设置序号，也不需要进行流量控制。 PPP 协议不支待多点线路 （即一个主站轮流和链路上的多个从站进行通信），而<strong>只支持点对点的链路通信</strong>。此外， PPP 协议<strong>只支持全双工链路</strong>。</p>
<ol>
<li>
<p>PPP 协议的组成</p>
<ul>
<li>一个将 IP 数据报封装到串行链路的方法。</li>
<li>链路控制协议 LCP (Link Control Protocol)，用来建立、测试、配置数据链路连接。</li>
<li>网络控制协议 NCP (Network Control Protocol)，用来支持不同的网络层协议。</li>
</ul>
</li>
<li>
<p>PPP 协议帧格式</p>
<figure data-type="image" tabindex="6"><img src="https://s1.ax1x.com/2020/06/04/tBPn9U.png" alt="tBPn9U.png" loading="lazy"></figure>
<p>若出现连续两个标志字段，就表示这是一个空帧，应当丢弃。</p>
<ul>
<li>首部中的标志字段F(Flag)，规定为0x7E(符号0x表示它后面的字符是用十六进制表示的)。十六进制的7E的二进制表示是01111110)，标志字段表示一个帧的开始或结束。</li>
<li>首部中的地址字段A规定为0xFF(即11111111)，没有携带PPP协议帧的信息。</li>
<li>首部中的控制字段C规定为0x03(即00000011)，没有携带PPP协议帧的信息。</li>
<li>首部中的2字节的协议字段：<br>
(1) 当协议字段为0x0021时，PPP帧的信息字段就是IP数据报。<br>
(2) 当协议字段为0xC021时，PPP帧的信息字段就是PPP链路控制协议LCP的数据。<br>
(3) 当协议字段为0x8021时，PPP帧的信息字段就是网络层的控制数据。</li>
<li>信息部分不超过1500字节。</li>
<li>尾部中的第一个字段(2个字节)是使用CRC的帧检验序列FCS。</li>
</ul>
<p>透明传输的实现方法：</p>
<ul>
<li>当信息字段中出现和标志字段一样的比特(0x7E)组合时，就必须采取一些措施使这种形式上和标志字段一样的比特组合不出现在信息字段中。</li>
</ul>
<p>字节填充——PPP使用异步传输</p>
<ul>
<li>当 PPP 用在异步传输时，就使用一种特殊的字符填充法：将每一个 0x7E字节变为(0x7D, 0x5E)，0x7D转变成为(0x7D, 0x5D)。ASCII 码的控制字符（即数值小于 0x20 的字符），则在前面要加入0x7D，同时将该字符的编码加以改变。</li>
</ul>
<p>零比特填充——PPP使用同步传输</p>
<ul>
<li>只要发现有5个连续的1，则立即填入一个0。接收端把5个连续的1后的0比特删除。</li>
</ul>
</li>
<li>
<p>PPP 协议工作状态</p>
<p><strong>链路静止  --  建立物理层  --  链路建立  --  PC发LCP  --  NCP分配IP地址  --  链路打开，网络层建立。（释放时倒过来）</strong></p>
<figure data-type="image" tabindex="7"><img src="https://s1.ax1x.com/2020/06/04/tBFzh6.png" alt="tBFzh6.png" loading="lazy"></figure>
</li>
</ol>
<h3 id="3-使用广播信道的数据链路层">3. 使用广播信道的数据链路层</h3>
<h5 id="广播信道可以进行一对多的通信局域网具有广播功能局域网上的主机可共享连接在局-域网上的各种硬件和软件资源">广播信道可以进行一对多的通信，局域网具有广播功能，局域网上的主机可共享连接在局 域网上的各种硬件和软件资源。</h5>
<ol>
<li>
<p>局域网的数据链路层（局域网的数据链路层被拆分为了两个子层）</p>
<ul>
<li><strong>逻辑链路控制LLC子层</strong>：与传输媒体无关。</li>
<li><strong>媒体接入控制MAC子层</strong>：与接入到传输媒体有关的内容都放在 MAC 子层，和局域网都对 LLC 子层来说是透明的。</li>
</ul>
</li>
<li>
<p>适配器（网卡）的作用</p>
<p>包含了***数据链路层***及***物理层***这两个层次的功能。</p>
<figure data-type="image" tabindex="8"><img src="https://s1.ax1x.com/2020/06/04/tBAyLQ.png" alt="tBAyLQ.png" loading="lazy"></figure>
</li>
<li>
<p><strong>CSMA/CD 协议</strong></p>
<p>仅当数据帧中的目的地址与适配器 ROM 中存放的硬件地址(MAC 地址)一致时，该适配器才能接收这个数据帧。适配器对不是发送给自己的数据帧就丢弃。</p>
<p>以太网采用 CSMA/CD协议(<em><strong>载波监听多点接入／碰撞检测</strong></em>) 的方式来协调总线上各计算机的工作。具有两个特点：</p>
<ul>
<li>提供的服务是尽最大努力的交付，即不可靠的交付。</li>
<li>双向交替通信（半双工）。</li>
</ul>
<h5 id="csmacd协议的要点">CSMA/CD协议的要点：</h5>
<ul>
<li>
<p>**“多点接入”**就是计算机以多点接入（动态媒体接入控制）的方式连接在一根总线上。</p>
</li>
<li>
<p>**“载波监听”**就是”检测信道”，不管在发送前，还是在发送中，每个站都必须不停地检测信道。在发送前检测信道，是为了获得发送权。在发送中检测信道，是为了及时发现有 没有其他站的发送和本站发送的碰撞。即碰撞检测。</p>
</li>
<li>
<p>**“碰撞检测”**就是“边发送边监听”，即适配器边发送数据边检测信道上的信号电压的变化情况。当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。</p>
</li>
</ul>
<p>把总线上的单程端到端传播时延记为 <em>τ</em> ，A 发送数据后，最迟要经过 <em>2τ</em> 才能知道自己发送的数据和其他站发送的数据有没有发生碰撞。</p>
<figure data-type="image" tabindex="9"><img src="https://s1.ax1x.com/2020/06/04/tBZtZ4.png" alt="tBZtZ4.png" loading="lazy"></figure>
<p>电磁波在 1km 电缆的传播时延约为 <em>5µs</em>。</p>
<p>以太网的端到端往返时间 <em>2τ</em> 称为<em><strong>争用期***，又叫</strong>碰撞窗口</em>* 。<strong>经过争用期这 段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</strong></p>
<p>以太网使用<strong>截断二进制指数退避算法</strong>来确定碰撞后<strong>重传</strong>的时机。</p>
<ul>
<li>
<p>协议规定了基本退避时间为争用期 <em>2τ</em>, 具体的争用期时间是 <em><strong>51.2 µs</strong></em> 。对于 10 Mbit/s 以太网，在争用期内可发送 512 bit, 即 64字节。也可以说争用期是 512 比特时间。可以直接使用<strong>比特</strong>作为争用期的单位。争用期是 512bit, 即争用期是发送 512bit 所需的时间。</p>
</li>
<li>
<p>从 <em>[0,1, …，（2k -1)]</em> 中随机取出一个数，记为 <em>r</em> 。重传应推后的时间就是 <em><strong>r 倍的争用期</strong></em>。</p>
<div align="center">k=Min［重传次数， 10]</div>
</li>
<li>
<p>当重传达 16 次仍不能成功时（这表明同时打算发送数据的站太多，以致连续发生冲突），则丢弃该帧，并向高层报告。</p>
</li>
</ul>
<p>最短帧长 64 字节，即 512 bit 。如果要发送的数据非常少，那么必须加入一些填充字节，使帧长不小于 64 字节。<strong>凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧</strong>。只要收到了这种无效帧，就应当立即将其丢弃。</p>
<h5 id="强化碰撞">强化碰撞：</h5>
<p>​		当发送数据的站一旦发现发生了碰撞时，除了立即停止发送数据外，还要再继续发送 32 比特或 48 比特的<em>人为干扰信号</em>，以便让所有用户都知道现在已经发生了碰撞。</p>
<figure data-type="image" tabindex="10"><img src="https://s1.ax1x.com/2020/06/04/tBnhWR.png" alt="tBnhWR.png" loading="lazy"></figure>
<p>​		总线被占用的时间是 <em>TB+ TJ + τ</em>。</p>
<p><strong>规定帧间最小间隔为 9.6 µs</strong>, 相当于 96 比特时间。这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。</p>
<h5 id="总结">总结：</h5>
<div align="center"><img src="https://s1.ax1x.com/2020/06/04/tBuw7D.md.png" alt="tBuw7D.png" border="0" /></div>
</li>
<li>
<h5 id="以太网的信道利用率">以太网的信道利用率</h5>
<p><em>a</em> 是以太网单程端到端时延 <em>2τ</em> 与帧的发送时间 <em>To</em> 之比：</p>
<figure data-type="image" tabindex="11"><img src="https://s1.ax1x.com/2020/06/04/tBMVs0.png" alt="tBMVs0.png" loading="lazy"></figure>
<p>当 a -&gt; 0 时表示只要一发生碰撞，就立即可以检测出来，并立即停止发送，因而信道资源被浪费的时间非常非常少。反之，参数 <em>a</em> 越大，表明争用期所占的比例越大，使得信道利用率明显降低。当数据率一定时，以太网的连线的长度受到限制（否则 <em>τ</em> 的数值 会太大），同时以太网的帧长不能太短（否则 <em>τ</em> 的值会太小，使 <em>To</em> 值太大）。</p>
<figure data-type="image" tabindex="12"><img src="https://s1.ax1x.com/2020/06/04/tBQccR.png" alt="tBQccR.png" loading="lazy"></figure>
<p>只有当参数 <em>a</em> 远小于 1 才能得到尽可能高的极限信道利用率。</p>
</li>
</ol>
<h3 id="4-以太网的mac层">4. 以太网的MAC层</h3>
<ul>
<li>
<p>MAC地址<br>
<strong>MAC地址</strong>又叫做硬件地址或物理地址，实际上就是适配器地址或适配器标识符EUI-48。高位24位：注册管理机构 RA，组织唯一标识符 OUI，低位24位：由厂家自行指派，称为扩展标识符。</p>
<p>路由器如果同时连接到两个网络上，那么它就需要两个适配器和两个硬件地址。</p>
</li>
<li>
<p>MAC帧的格式</p>
<figure data-type="image" tabindex="13"><img src="https://s1.ax1x.com/2020/06/04/tBGEQJ.png" alt="tBGEQJ.png" loading="lazy"></figure>
<p>以太网V2的MAC帧由五个字段组成。前两个字段分别为6字长的目标地址和源地址字段。第三个字段是2字节的类型字段，用来标志上一层使用的是什么协议，以便把收到的MAC帧的数据上交给上一层的这个协议。后面数据字段46~1500字节，帧检验序列FCS字段4个字节（使用 CRC 检验）。</p>
<p><em>接收方可以很容易地通过发送方网络适配器的接口上的电压是否变化找到以太网帧的结束位置</em>。在这个位置往前数 4 字节 (FCS 字段长度是 4 字节），就能确定数据字段的结束位置。因此MAC帧首部中不需要帧长度字段。</p>
<p>当数据字段的长度小千 46 字节时， MAC 子层就会在数据字段的后面加入一个整数字节的<em>填充字段</em>，以保证以太网的 MAC 帧长不小于 64 字节。</p>
<p>为了接收端迅速实现位同步，从 MAC 子层向下传到物理层时还要在帧的前面插入8字节（由硬件生成），它由两个字段构成。</p>
<ul>
<li>第一个字段是 个字节的前同步码 (1 交替码），它的作用是“实现位同步”（比特同步）。</li>
<li>第二个字段是帧开始定界符，定义为 10101011 。它的前六位的作用和前同步码一样，最后的两个连续1的就是告诉接收端适配器： “MAC 帧的信息马上就要来了，请适配器注意接收'。MAC 帧的 FCS 字段的检验范围不包括前同步码和帧开始定界符。</li>
</ul>
<p>无效的 MAC 帧：</p>
<ul>
<li>帧的长度不是整数个字节；</li>
<li>用收到的帧检验序列 FCS 查出有差错；</li>
<li>收到的帧的 MAC 客户数据字段的长度不在 46 ~ 1500 字节之间。</li>
</ul>
<p><strong>对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。</strong></p>
</li>
</ul>
<h3 id="5-扩展的以太网">5. 扩展的以太网</h3>
<h5 id="扩展的以太网在网络层看来仍然是一个网络">扩展的以太网在网络层看来仍然是一个网络。</h5>
<ol>
<li>
<p>在物理层扩展以太网</p>
<p>扩展主机和集线器之间的距离的一种简单方法就是使用光纤（通常是一对光纤）和一对光纤调制解调器。</p>
<p>光纤调制解调器的作用就是进行<em>电信号和光信号的转换</em>。</p>
<figure data-type="image" tabindex="14"><img src="https://s1.ax1x.com/2020/06/04/tBYkr9.png" alt="tBYkr9.png" loading="lazy"></figure>
<p>优点：</p>
<ul>
<li>跨网络通信。</li>
<li>扩大了以太网覆盖的地理范围。</li>
</ul>
<p>缺点：</p>
<ul>
<li>扩大了碰撞域。</li>
<li>不同的局域网使用不同的以太网技术（如数据率不同），那么就不可能用集线器将它们互连起来（速率向下兼容）。</li>
</ul>
</li>
<li>
<p>在数据链路层扩展以太网</p>
<h5 id="网桥自学习算法">网桥（自学习算法）</h5>
<h5 id="以太网交换机第二层交换机-即多接口网桥强调这种交换机工作在数据链路层">以太网交换机（第二层交换机 ），即多接口网桥，强调这种交换机工作在数据链路层。</h5>
<ul>
<li>
<p>特点</p>
<ol>
<li>全双工方式通信。</li>
<li>并行。</li>
<li>相互通信的主机都是独占传输媒体，无碰撞地传输数据。</li>
<li>接口还有存储器，能在输出端口繁忙时把到来的帧进行缓存。</li>
</ol>
</li>
<li>
<p>自学习功能</p>
<figure data-type="image" tabindex="15"><img src="https://s1.ax1x.com/2020/06/04/tBt5p8.png" alt="tBt5p8.png" loading="lazy"></figure>
<p>​		A 先向 B 发送一帧，从接口 1 进入到交换机。交换机收到帧后，先查找交换表，没有查到应从哪个接口转发这个帧（在 MAC 地址这一列中，找不到目的地址为 B 的项目）。然后，交换机把这个帧的源地址 A 和接口 1 写入交换表中并向除接口,以外的所有接口广播这个帧。C 和 D 丢弃该帧，因为目的地址不对。只有 B 才收下这个目的地址正确的帧。此即为<strong>过滤</strong>。</p>
<p>​		以后不管从哪一个接口收到帧，只要其目的地 址是 A, 就应当把收到的帧从接口 1 转发出去。</p>
<p>​		B 向 A 发送帧时，交换机把这个帧的源地址 B 和接口 3 写入交换表中，此时不再广播，因为交换表中已经存在 A 的地址。</p>
</li>
</ul>
</li>
<li>
<p>虚拟局域网VLAN</p>
<p>每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机属于哪一个 VLAN，而与物理位置无关。</p>
<figure data-type="image" tabindex="16"><img src="https://s1.ax1x.com/2020/06/04/tBUZan.png" alt="tBUZan.png" loading="lazy"></figure>
<p>VLAN 标记的前两个字节总是设置为 0x8100 （即二进制的 10000001 00000000) ，称为 IEEE 802.1Q 标记类型。</p>
<p>VLAN 标识符 VID(VLANID) ，它唯一地标志了这个以太网帧属于哪一个 VLAN。</p>
<p>由于用于 VLAN 的以太网帧的首部增加了 4 个字节，因此以太网的最大帧长从原来的 1518 字节 (1500 字节的数据加上 18 字节的首部）变为 1522 字节。</p>
</li>
</ol>
<h3 id="6-高速以太网">6. 高速以太网</h3>
<p>此部分转载自CSDN，<a href="%5Bhttps://blog.csdn.net/KnightOnHourse/article/details/80198611?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522159127115919725219954270%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=159127115919725219954270&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-80198611.ecpm_v1_rank_ctr_v1&amp;utm_term=%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91%5D(https://blog.csdn.net/KnightOnHourse/article/details/80198611?ops_request_misc=%7B%22request%5Fid%22%3A%22159127115919725219954270%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=159127115919725219954270&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-80198611.ecpm_v1_rank_ctr_v1&amp;utm_term=%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91)">原文地址</a>（如侵删）</p>
<div class="htmledit_views prism-atom-one-light" id="content_views">
                                            <div class="blogpost-body"><p><strong>1. 100M以太网</strong></p><p align="center">快速以太网（100M）标准</p><div align="center"><div class="table-box"><table border="1" cellpadding="0" cellspacing="0"><tbody><tr><td valign="top" width="95"><p align="center">名称</p></td><td valign="top" width="81"><p align="center">传输介质</p></td><td valign="top" width="130"><p align="center">网段最大长度</p></td><td valign="top" width="360"><p align="center">特点</p></td></tr><tr><td valign="top" width="95"><p align="center">100BASE-TX</p></td><td valign="top" width="81"><p align="center">铜缆</p></td><td valign="top" width="130"><p align="center">100m</p></td><td valign="top" width="360"><p align="left">两对UTP5类线或屏蔽双绞线</p></td></tr><tr><td valign="top" width="95"><p align="center">100BASE-T4</p></td><td valign="top" width="81"><p align="center">铜缆</p></td><td valign="top" width="130"><p align="center">100m</p></td><td valign="top" width="360"><p align="left">四对UTP3类线或5类线</p></td></tr><tr><td valign="top" width="95"><p align="center">100BASE-FX</p></td><td valign="top" width="81"><p align="center">光纤</p></td><td valign="top" width="130"><p align="center">2000m</p></td><td valign="top" width="360"><p align="left">两根光纤，发送和接收各用一根，全双工，长距离</p></td></tr></tbody></table></div></div><p>（1）100BASE-T是在双绞线上传送100Mb/s基带信号的星型拓扑的以太网，仍使用IEEE802.3的CSMA/CD协议，它又称为快速以太网（FastEthernet）</p><p>（2）使用交换机组建的100BASE-T以太网，可在全双工方式下工作而无冲突发生。因此，<span style="color:#ff00ff;"><strong>CSMA/CD协议对全双工方式工作的快速以太网是不起作用的</strong></span>。<span style="color:#ff0000;"><strong>因为其帧格式和以太网一样</strong></span>，所以依然称<span style="color:#ff0000;"><strong>交换机组成的网络为以太网</strong></span>。</p><p>（3）以太网的最短帧与带宽和链路长度有关。<span style="color:#ff0000;"><strong>100M以太网</strong></span>比10M以太网速率提高10位，要想和10M以太网兼容，就要确保最短帧也是64字节，那就将电缆最大长度由1000m降到<span style="color:#0000ff;"><strong>100m</strong></span>，因此以太网的争用期依然是51.2μs，最短帧依然是64字节。</p><p><strong>2. 吉比特以太网</strong></p><p align="center">吉比特以太网（1000M）标准</p><div align="center"><div class="table-box"><table border="1" cellpadding="0" cellspacing="0"><tbody><tr><td valign="top" width="95"><p align="center">名称</p></td><td valign="top" width="81"><p align="center">传输介质</p></td><td valign="top" width="130"><p align="center">网段最大长度</p></td><td valign="top" width="360"><p align="center">特点</p></td></tr><tr><td valign="top" width="95"><p align="center">1000BASE-SX</p></td><td valign="top" width="81"><p align="center">光缆</p></td><td valign="top" width="130"><p align="center">550m</p></td><td valign="top" width="360"><p align="left">多模光纤（10和62.5μm）</p></td></tr><tr><td valign="top" width="95"><p align="center">1000BASE-LX</p></td><td valign="top" width="81"><p align="center">光缆</p></td><td valign="top" width="130"><p align="center">5000m</p></td><td valign="top" width="360"><p align="left">单模光纤（10μm）、多模光纤（50和62.5μm）</p></td></tr><tr><td valign="top" width="95"><p align="center">1000BASE-CX</p></td><td valign="top" width="81"><p align="center">铜线</p></td><td valign="top" width="130"><p align="center">25m</p></td><td valign="top" width="360"><p align="left">使用两对屏蔽双绞线电缆STP</p></td></tr><tr><td valign="top" width="95"><p align="center">1000BASE-T</p></td><td valign="top" width="81"><p align="center">铜线</p></td><td valign="top" width="130"><p align="center">100m</p></td><td valign="top" width="360"><p align="left">使用四对UTP5类线</p></td></tr></tbody></table></div></div><p>（1）吉比特（1000M）以太网的特点</p><p>　　①允许在1Gb/s下<span style="color:#0000ff;"><strong>全双工和半双工</strong></span>两种方式下工作。</p><p>　　②使用IEEE802.3协议规定的帧格式</p><p>　　③在<span style="color:#ff0000;"><strong>半双工方式下使用CSMA/CD协议</strong>（<strong>全双工方式不需要使用CSMA/CD协议</strong>）</span></p><p>　　④与10BASE-T和100BASE-T技术向后兼容。</p><p>（2）“载波延伸”</p><p align="center"><img src="https://s1.ax1x.com/2020/06/04/tBw2J1.png" alt="" height="235" width="658">&nbsp;</p><p>　　①吉比特以太网工作<span style="color:#ff0000;"><strong>在半双工时</strong></span>，就必须进行碰撞检测。数据速率提高了，要想和10M以太网兼容，就要确保最短帧也是64字节，这只能减少最大电缆长度，<span style="color:#0000ff;"><strong>以太网最大电缆就要缩短到10m</strong></span>，短到几乎没有实用价值。</p><p>　　②吉比特以太网<span style="color:#ff0000;"><strong>为了增加最大传输距离</strong>，<strong>将最短帧由64字节增加到512字节</strong></span>。</p><p>　　③如果数据帧不超过512字节，则在<span style="color:#ff00ff;"><strong>FCS域后面添加“载波延伸”域</strong></span>，当主机发送完短数据帧后，继续发送载波延伸信号，冲突信号传回来时，发送端就能感知到了。</p><p>（3）分组突发</p><p align="center"><img src="https://s1.ax1x.com/2020/06/04/tBw4sO.png" alt="" height="251" width="756">&nbsp;</p><p>　　①如果发送的数据帧都是小于64字节的<span style="color:#ff0000;"><strong>短报文</strong></span>时，那么<span style="color:#ff00ff;"><strong>链路的利用率就会很低</strong></span>，因为“载波延伸”域占用了大量的带宽。于是，千兆以太网引入了“分组突发”机制来改善这个问题。</p><p>　　②当很多短帧要发送时，<span style="color:#ff0000;"><strong>第一个短帧采用“载波延伸”方法进行填充</strong></span>，<strong><span style="color:#0000ff;">后面的一些短帧可以一个接一个发送</span>，<span style="color:#ff0000;">它们之间只要留必要的帧间最小间隔即可</span></strong>。这样就形成一串分组突发，直到达到1500字节或稍多一些为止。从而提高链路的利用率。</p><p>　　③“载波延伸”和“分组突发”<span style="color:#0000ff;"><strong>仅用于千兆以太网的半双工模式</strong></span>；而全双工模式不需要使用CSMA/CD协议，也就不需要这两个特性。</p><p><strong>3. 10吉比特以太网</strong></p><p align="center">万兆以太网标准</p><div align="center"><div class="table-box"><table border="1" cellpadding="0" cellspacing="0"><tbody><tr><td valign="top" width="101"><p align="center">名称</p></td><td valign="top" width="81"><p align="center">传输介质</p></td><td valign="top" width="129"><p align="center">网段最大长度</p></td><td valign="top" width="220"><p align="center">特点</p></td></tr><tr><td valign="top" width="101"><p align="center">10GBASE-SR</p></td><td valign="top" width="81"><p align="center">光缆</p></td><td valign="top" width="129"><p align="center">300m</p></td><td valign="top" width="220"><p align="left">多模光纤（0.85μm）</p></td></tr><tr><td valign="top" width="101"><p align="center">10GBASE-LR</p></td><td valign="top" width="81"><p align="center">光缆</p></td><td valign="top" width="129"><p align="center">10km</p></td><td valign="top" width="220"><p align="left">单模光纤（1.3μm）</p></td></tr><tr><td valign="top" width="101"><p align="center">10GBASE-ER</p></td><td valign="top" width="81"><p align="center">光缆</p></td><td valign="top" width="129"><p align="center">40m</p></td><td valign="top" width="220"><p align="left">单模光纤（1.3μm）</p></td></tr><tr><td valign="top" width="101"><p>10GBASE-CX4</p></td><td valign="top" width="81"><p align="center">铜线</p></td><td valign="top" width="129"><p align="center">15m</p></td><td valign="top" width="220"><p align="left">使用四对双芯同轴电缆</p></td></tr><tr><td valign="top" width="101"><p align="center">10GBASE-T</p></td><td valign="top" width="81"><p align="center">铜线</p></td><td valign="top" width="129"><p align="center">100m</p></td><td valign="top" width="220"><p align="left">使用4对6A类的UTP双绞线</p></td></tr></tbody></table></div></div><p>（1）10GE的帧格式与10Mb/s、100Mb/s和1Gb/s以太网的帧格式完全相同。10GE还保留了802.3标准规定的了以太网最小和最长帧长。</p><p>（2）由于数据率很高，10GE不再使用铜线而只使用光纤作为传输媒体。它使用长距离（40km）的光收发器与单模光纤接口，以便能够工作在广域网和城域网的范围。</p><p>（3）10GE只工作在全双工模式，因此不存在争用问题，也不使用CSMA/CD协议。这就使用10GE的传输距离不再受碰撞检测的限制而大大提高了</p></div>                                    </div>
            </div>
            
            
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong class="language" data-lan="author">本文作者：</strong>
      Keasar
    </li>
    <li class="post-copyright-link">
      <strong class="language" data-lan="link">本文链接：</strong>
      <a href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/" title="👾计算机网络学习笔记（三）--  数据链路层">https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/</a>
    </li>
    <li class="post-copyright-license">
      <strong class="language" data-lan="copyright">版权声明： </strong>
      本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://qzlu-cyber.github.io/Keasar_Blog/tag/huZmcNfOq/"># 计算机网络</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="🤖计算机网络学习笔记（四）--  网络层" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/">🤖计算机网络学习笔记（四）--  网络层</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="🤖计算机网络学习笔记（四）--  网络层" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/">上一篇</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="☠️计算机网络学习笔记（二）--  物理层" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/">☠️计算机网络学习笔记（二）--  物理层</a>
        <a class="nav-mobile-next" title="☠️计算机网络学习笔记（二）--  物理层" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
            
  <script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<div id="vcomments" style="padding: 10px 0px 0px 0px"></div>

<style>
  .v .veditor {
    min-height: 10rem;
    background-image: url('');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: right;
    background-color: rgba(255, 255, 255, 0);
    resize: none;
  }

  .v .vwrap {
    border: 1px solid #000 !important;
  }

  .v .vbtn {
    padding: .4rem 1.2rem !important;
    border-color: #fff !important;
    background-color: #49b1f5 !important;
    color: #fff !important;
    font-size: .7rem !important;
  }

  .v .vcards .vcard .vh .vmeta .vat {
    padding: 0 .8rem !important;
    border: 1px solid #00c4b6 !important;
    border-radius: 5px !important;
    color: #00c4b6 !important;
  }
</style>
<script>
  new Valine({
    el: '#vcomments',
    appId: '00K414IJmQeBNc9fa3hhlowu-gzGzoHsz',
    appKey: 'G1WPh4BmIzV6HJM048mAhCPO',
    avatar: '',
    placeholder: '请留下您宝贵的评论：',
    pageSize: '',
    lang: 'zh-cn',
    enableQQ: true,
    visitor: 'true' === 'true',
    highlight: 'true' === 'true',
    avatarForce: 'true' === 'false',
  });
</script>

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | © 2019-2020 Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
  </footer>
  
  
  <div class="drawer-box left" id="drawer_box">
    <span class="muse-line muse-line-first"></span>
    <span class="muse-line muse-line-middle"></span>
    <span class="muse-line muse-line-last"></span>
  </div>
  
  <div class="mist back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
  </div>
  
  
  
<link rel="stylesheet" href="/media/live2d/css/live2d.css" />
<div class="box-scale">
  <div id="landlord" style="left: 5px;bottom: px;"
    data-key="">
    <canvas id="live2d" width="500" height="560" class="live2d"></canvas>
    

      <div class="message" style="opacity:0"></div>
      <div class="live_talk_input_body">
        <div class="live_talk_input_name_body">
          <input name="name" type="text" class="live_talk_name white_input" id="AIuserName" autocomplete="off"
            placeholder="你的名字" />
        </div>
        <div class="live_talk_input_text_body">
          <input name="talk" type="text" class="live_talk_talk white_input" id="AIuserText" autocomplete="off"
            placeholder="要和我聊什么呀？" />
          <button type="button" class="live_talk_send_btn" id="talk_send">发送</button>
        </div>
      </div>
      <input name="live_talk" id="live_talk" value="1" type="hidden" />
      <div class="live_ico_box">
        <div class="live_ico_item type_info" id="showInfoBtn"></div>
        <div class="live_ico_item type_talk" id="showTalkBtn"></div>
        
        <div class="live_ico_item type_youdu" id="youduButton"></div>
        <div class="live_ico_item type_quit" id="hideButton"></div>
        <input name="live_statu_val" id="live_statu_val" value="0" type="hidden" />
        <audio src="" style="display:none;" id="live2d_bgm" data-bgm="0" preload="none"></audio>
        <input id="duType" value="douqilai" type="hidden">
        
      </div>
    
  </div>
</div>
<div id="open_live2d">召唤看板娘</div>
<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
  var message_Path = 'https://cdn.jsdelivr.net/gh/hsxyhao/live2d.github.io@master/';
  let landlord = document.querySelector('#landlord');
  var apiKey = landlord.dataset.key;
</script>
<script type="text/javascript" src="/media/live2d/js/live2d.js"></script>
<script>
	var home_Path = document.location.protocol + '//' + window.document.location.hostname + ":" + window.document.location.port + '/';
	var userAgent = window.navigator.userAgent.toLowerCase();
	var norunAI = ["android", "iphone", "ipod", "ipad", "windows phone", "mqqbrowser", "msie", "trident/7.0"];
	var norunFlag = false;

	for (var i = 0; i < norunAI.length; i++) {
		if (userAgent.indexOf(norunAI[i]) > -1) {
			norunFlag = true;
			break;
		}
	}

	if (!window.WebGLRenderingContext) {
		norunFlag = true;
	}

	if (!norunFlag) {
		var hitFlag = false;
		var AIFadeFlag = false;
		var liveTlakTimer = null;
		var sleepTimer_ = null;
		var AITalkFlag = false;
		var talkNum = 0;
		(function () {
			function renderTip(template, context) {
				var tokenReg = /(\\)?\{([^\{\}\\]+)(\\)?\}/g;
				return template.replace(tokenReg, function (word, slash1, token, slash2) {
					if (slash1 || slash2) {
						return word.replace('\\', '');
					}
					var variables = token.replace(/\s/g, '').split('.');
					var currentObject = context;
					var i, length, variable;
					for (i = 0, length = variables.length; i < length; ++i) {
						variable = variables[i];
						currentObject = currentObject[variable];
						if (currentObject === undefined || currentObject === null) return '';
					}
					return currentObject;
				});
			}

			String.prototype.renderTip = function (context) {
				return renderTip(this, context);
			};

			var re = /x/;
			re.toString = function () {
				showMessage('哈哈，你打开了控制台，是想要看看我的秘密吗？', 5000);
				return '';
			};

			$(document).on('copy', function () {
				showMessage('你都复制了些什么呀，转载要记得加上出处哦~~', 5000);
			});

			function initTips() {
				$.ajax({
					cache: true,
					url: message_Path + 'message.json',
					dataType: "json",
					success: function (result) {
						$.each(result.mouseover, function (index, tips) {
							$(tips.selector).mouseover(function () {
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
								talkValTimer();
								clearInterval(liveTlakTimer);
								liveTlakTimer = null;
							});
							$(tips.selector).mouseout(function () {
								showHitokoto();
								if (liveTlakTimer == null) {
									liveTlakTimer = window.setInterval(function () {
										showHitokoto();
									}, 15000);
								};
							});
						});
						$.each(result.click, function (index, tips) {
							$(tips.selector).click(function () {
								if (hitFlag) {
									return false
								}
								hitFlag = true;
								setTimeout(function () {
									hitFlag = false;
								}, 8000);
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
							});
							clearInterval(liveTlakTimer);
							liveTlakTimer = null;
							if (liveTlakTimer == null) {
								liveTlakTimer = window.setInterval(function () {
									showHitokoto();
								}, 15000);
							};
						});
					}
				});
			}
			initTips();

			var text;
			if (document.referrer !== '') {
				var referrer = document.createElement('a');
				referrer.href = document.referrer;
				text = '嗨！来自 <span style="color:#0099cc;">' + referrer.hostname + '</span> 的朋友！';
				var domain = referrer.hostname.split('.')[1];
				if (domain == 'baidu') {
					text = '嗨！ 来自 百度搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				} else if (domain == 'so') {
					text = '嗨！ 来自 360搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				} else if (domain == 'google') {
					text = '嗨！ 来自 谷歌搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				}
			} else {
				if (window.location.href == home_Path) { //主页URL判断，需要斜杠结尾
					var now = (new Date()).getHours();
					if (now > 23 || now <= 5) {
						text = '你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？';
					} else if (now > 5 && now <= 7) {
						text = '早上好！一日之计在于晨，美好的一天就要开始了！';
					} else if (now > 7 && now <= 11) {
						text = '上午好！工作顺利嘛，不要久坐，多起来走动走动哦！';
					} else if (now > 11 && now <= 14) {
						text = '中午了，工作了一个上午，现在是午餐时间！';
					} else if (now > 14 && now <= 17) {
						text = '午后很容易犯困呢，今天的运动目标完成了吗？';
					} else if (now > 17 && now <= 19) {
						text = '傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红~~';
					} else if (now > 19 && now <= 21) {
						text = '晚上好，今天过得怎么样？';
					} else if (now > 21 && now <= 23) {
						text = '已经这么晚了呀，早点休息吧，晚安~~';
					} else {
						text = '嗨~ 快来逗我玩吧！';
					}
				} else {
					text = '欢迎阅读<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				}
			}
			showMessage(text, 12000);
		})();

		liveTlakTimer = setInterval(function () {
			showHitokoto();
		}, 15000);

		function showHitokoto() {
			if (sessionStorage.getItem("Sleepy") !== "1") {
				if (!AITalkFlag) {
					$.getJSON('https://v1.hitokoto.cn/', function (result) {
						talkValTimer();
						showMessage(result.hitokoto, 0);
					});
				}
			} else {
				hideMessage(0);
				if (sleepTimer_ == null) {
					sleepTimer_ = setInterval(function () {
						checkSleep();
					}, 200);
				}
			}
		}

		function checkSleep() {
			var sleepStatu = sessionStorage.getItem("Sleepy");
			if (sleepStatu !== '1') {
				talkValTimer();
				showMessage('你回来啦~', 0);
				clearInterval(sleepTimer_);
				sleepTimer_ = null;
			}
		}

		function showMessage(text, timeout) {
			if (Array.isArray(text)) text = text[Math.floor(Math.random() * text.length + 1) - 1];
			$('.message').stop();
			$('.message').html(text);
			$('.message').fadeTo(200, 1);
			//if (timeout === null) timeout = 5000;
			//hideMessage(timeout);
		}
		function talkValTimer() {
			$('#live_talk').val('1');
		}

		function hideMessage(timeout) {
			//$('.message').stop().css('opacity',1);
			if (timeout === null) timeout = 5000;
			$('.message').delay(timeout).fadeTo(200, 0);
		}

		function initLive2d() {
			$('#hideButton').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "0");
					$('#landlord').fadeOut(200);
					$('#open_live2d').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#open_live2d').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "1");
					$('#open_live2d').fadeOut(200);
					$('#landlord').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#youduButton').on('click', function () {
				if ($('#youduButton').hasClass('doudong')) {
					var typeIs = $('#youduButton').attr('data-type');
					$('#youduButton').removeClass('doudong');
					$('body').removeClass(typeIs);
					$('#youduButton').attr('data-type', '');
				} else {
					var duType = $('#duType').val();
					var duArr = duType.split(",");
					var dataType = duArr[Math.floor(Math.random() * duArr.length)];

					$('#youduButton').addClass('doudong');
					$('#youduButton').attr('data-type', dataType);
					$('body').addClass(dataType);
				}
			});
			if (apiKey) {
				$('#showInfoBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "0") {
						return
					} else {
						$('#live_statu_val').val("0");
						$('.live_talk_input_body').fadeOut(500);
						AITalkFlag = false;
						showHitokoto();
						$('#showTalkBtn').show();
						$('#showInfoBtn').hide();
					}
				});
				$('#showTalkBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "1") {
						return
					} else {
						$('#live_statu_val').val("1");
						$('.live_talk_input_body').fadeIn(500);
						AITalkFlag = true;
						$('#showTalkBtn').hide();
						$('#showInfoBtn').show();

					}
				});
				$('#talk_send').on('click', function () {
					var info_ = $('#AIuserText').val();
					var userid_ = $('#AIuserName').val();
					if (info_ == "") {
						showMessage('写点什么吧！', 0);
						return;
					}
					if (userid_ == "") {
						showMessage('聊之前请告诉我你的名字吧！', 0);
						return;
					}
					showMessage('思考中~', 0);
					let protocol = window.location.protocol.indexOf("s") > 0 ? "https" : "http";
					$.ajax({
						type: "get",
						url: `${protocol}://www.tuling123.com/openapi/api?key=${apiKey}&info=${info_}`,
						dataType: "json",
						success: function (res) {
							talkValTimer();
							showMessage(res.text, 0);
							$('#AIuserText').val("");
							sessionStorage.setItem("live2duser", userid_);
						},
						error: function (e) {
							talkValTimer();
							showMessage('似乎有什么错误，请和站长联系！', 0);
						}
					});
				});
			} else {
				$('#showInfoBtn').hide();
				$('#showTalkBtn').hide();
			}
			//获取音乐信息初始化
			var bgmListInfo = $('input[name=live2dBGM]');
			if (bgmListInfo.length == 0) {
				$('#musicButton').hide();
			} else {
				var bgmPlayNow = parseInt($('#live2d_bgm').attr('data-bgm'));
				var bgmPlayTime = 0;
				var live2dBGM_Num = sessionStorage.getItem("live2dBGM_Num");
				var live2dBGM_PlayTime = sessionStorage.getItem("live2dBGM_PlayTime");
				if (live2dBGM_Num) {
					if (live2dBGM_Num <= $('input[name=live2dBGM]').length - 1) {
						bgmPlayNow = parseInt(live2dBGM_Num);
					}
				}
				if (live2dBGM_PlayTime) {
					bgmPlayTime = parseInt(live2dBGM_PlayTime);
				}
				var live2dBGMSrc = bgmListInfo.eq(bgmPlayNow).val();
				$('#live2d_bgm').attr('data-bgm', bgmPlayNow);
				$('#live2d_bgm').attr('src', live2dBGMSrc);
				$('#live2d_bgm')[0].currentTime = bgmPlayTime;
				$('#live2d_bgm')[0].volume = 0.5;
				var live2dBGM_IsPlay = sessionStorage.getItem("live2dBGM_IsPlay");
				var live2dBGM_WindowClose = sessionStorage.getItem("live2dBGM_WindowClose");
				if (live2dBGM_IsPlay == '0' && live2dBGM_WindowClose == '0') {
					$('#live2d_bgm')[0].play();
					$('#musicButton').addClass('play');
				}
				sessionStorage.setItem("live2dBGM_WindowClose", '1');
				$('#musicButton').on('click', function () {
					if ($('#musicButton').hasClass('play')) {
						$('#live2d_bgm')[0].pause();
						$('#musicButton').removeClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '1');
					} else {
						$('#live2d_bgm')[0].play();
						$('#musicButton').addClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				});
				window.onbeforeunload = function () {
					sessionStorage.setItem("live2dBGM_WindowClose", '0');
					if ($('#musicButton').hasClass('play')) {
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				}
				document.getElementById('live2d_bgm').addEventListener("timeupdate", function () {
					var live2dBgmPlayTimeNow = document.getElementById('live2d_bgm').currentTime;
					sessionStorage.setItem("live2dBGM_PlayTime", live2dBgmPlayTimeNow);
				});
				document.getElementById('live2d_bgm').addEventListener("ended", function () {
					var listNow = parseInt($('#live2d_bgm').attr('data-bgm'));
					listNow++;
					if (listNow > $('input[name=live2dBGM]').length - 1) {
						listNow = 0;
					}
					var listNewSrc = $('input[name=live2dBGM]').eq(listNow).val();
					sessionStorage.setItem("live2dBGM_Num", listNow);
					$('#live2d_bgm').attr('src', listNewSrc);
					$('#live2d_bgm')[0].play();
					$('#live2d_bgm').attr('data-bgm', listNow);
				});
				document.getElementById('live2d_bgm').addEventListener("error", function () {
					$('#live2d_bgm')[0].pause();
					$('#musicButton').removeClass('play');
					showMessage('音乐似乎加载不出来了呢！', 0);
				});
			}
			//获取用户名
			var live2dUser = sessionStorage.getItem("live2duser");
			if (live2dUser !== null) {
				$('#AIuserName').val(live2dUser);
			}
			//获取位置
			var landL = sessionStorage.getItem("historywidth");
			var landB = sessionStorage.getItem("historyheight");
			if (landL == null || landB == null) {
				landL = '5px'
				landB = '0px'
			}
			$('#landlord').css('left', landL + 'px');
			$('#landlord').css('bottom', landB + 'px');
			//移动
			function getEvent() {
				return window.event || arguments.callee.caller.arguments[0];
			}
			var smcc = document.getElementById("landlord");
			var moveX = 0;
			var moveY = 0;
			var moveBottom = 0;
			var moveLeft = 0;
			var moveable = false;
			var docMouseMoveEvent = document.onmousemove;
			var docMouseUpEvent = document.onmouseup;
			smcc.onmousedown = function () {
				var ent = getEvent();
				moveable = true;
				moveX = ent.clientX;
				moveY = ent.clientY;
				var obj = smcc;
				moveBottom = parseInt(obj.style.bottom);
				moveLeft = parseInt(obj.style.left);
				if (isFirefox = navigator.userAgent.indexOf("Firefox") > 0) {
					window.getSelection().removeAllRanges();
				}
				document.onmousemove = function () {
					if (moveable) {
						var ent = getEvent();
						var x = moveLeft + ent.clientX - moveX;
						var y = moveBottom + (moveY - ent.clientY);
						obj.style.left = x + "px";
						obj.style.bottom = y + "px";
					}
				};
				document.onmouseup = function () {
					if (moveable) {
						var historywidth = obj.style.left;
						var historyheight = obj.style.bottom;
						historywidth = historywidth.replace('px', '');
						historyheight = historyheight.replace('px', '');
						sessionStorage.setItem("historywidth", historywidth);
						sessionStorage.setItem("historyheight", historyheight);
						document.onmousemove = docMouseMoveEvent;
						document.onmouseup = docMouseUpEvent;
						moveable = false;
						moveX = 0;
						moveY = 0;
						moveBottom = 0;
						moveLeft = 0;
					}
				};
			};
		}
		$(document).ready(function () {
			var AIimgSrc = [];
			let chooseLive2d = 'tororo'
			if (chooseLive2d === 'histoire') {
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_00.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_01.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_02.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_03.png");
			} else if (chooseLive2d === 'rem') {
				AIimgSrc.push(message_Path + "model/rem/remu2048/texture_00.png");
			} else if (chooseLive2d === 'aoba') {
				AIimgSrc.push(message_Path + "model/aoba/textures/texture_00.png");
			} else if (chooseLive2d === 'hijiki') {
				AIimgSrc.push(message_Path + "model/hijiki/moc/hijiki.2048/texture_00.png");
			} else if (chooseLive2d === 'tororo') {
				AIimgSrc.push(message_Path + "model/tororo/moc/tororo.2048/texture_00.png");
			}
			var images = [];
			var imgLength = AIimgSrc.length;
			var loadingNum = 0;
			for (var i = 0; i < imgLength; i++) {
				images[i] = new Image();
				images[i].src = AIimgSrc[i];
				images[i].onload = function () {
					loadingNum++;
					if (loadingNum === imgLength) {
						var live2dhidden = localStorage.getItem("live2dhidden");
						if (live2dhidden === "0") {
							setTimeout(function () {
								$('#open_live2d').fadeIn(200);
							}, 1300);
						} else {
							setTimeout(function () {
								$('#landlord').fadeIn(200);
							}, 1300);
						}
						let model = '';
						if (chooseLive2d === 'histoire') {
							model = message_Path + "model/histoire/model.json";
						} else if (chooseLive2d === 'rem') {
							model = message_Path + "model/rem/model.json";
						} else if (chooseLive2d === 'aoba') {
							model = message_Path + "model/aoba/model.json";
						} else if (chooseLive2d === 'hijiki') {
							model = message_Path + "model/hijiki/hijiki.model.json";
						} else if (chooseLive2d === 'tororo') {
							model = message_Path + "model/tororo/tororo.model.json";
						}
						setTimeout(function () {
							loadlive2d("live2d", model);
						}, 1000);
						initLive2d();
						images = null;
					}
				}
			}
		});
	}
</script>
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.onresize = function () {
    calcuHeight();
  }

  function calcuHeight() {
    // 动态调整站点概览高度
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, transitionDir, {});
          }
        })
        window.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // 链接跳转
  let newWindow = 'true'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // 代码高亮
  hljs.initHighlightingOnLoad();
  
  // 离开当前页title变化
  var leaveTitle = '';
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>
    <div class="light-box" id="light_box"></div>
<script>
  let imgs = document.querySelectorAll('.post-body img');
  let lightBox = document.querySelector('#light_box');
  lightBox.addEventListener('mousedown', (e) => {
    e.preventDefault()
  })
  lightBox.addEventListener('mousewheel', (e) => {
    e.preventDefault()
  })
  let width = window.innerWidth * 0.8;
  lightBox.onclick = () => {
    let img = lightBox.querySelector('img');
    lightBox.style = '';
    img && img.remove();
  }
  imgs.forEach(item => {
    item.onclick = function (e) {
      let lightImg = document.createElement('img');
      lightImg.src = this.src;
      lightBox.style = `height: 100%; opacity: 1; background-color: rgba(0, 0, 0, 0.5);cursor: zoom-out;`;
      lightImg.style = `width: ${width}px; border: 1px solid #fff; border-radius: 2px;`;
      lightImg.onclick = function () {
        lightBox.style = '';
        this.remove();
      }
      lightBox.append(lightImg);
    }
  })
</script>
    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>感谢您的支持，我会继续努力的!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">扫码打赏，你说多少就多少</p>
      <p class="reward-tip">打开微信扫一扫，即可进行扫码打赏哦</p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        window.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        window.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        window.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        window.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      window.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      window.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

  <div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="搜索">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">条相关条目，使用了</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">毫秒</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/"" data-c="
          &lt;p&gt;😑&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/&#34;&gt;计算机网络学习笔记（一）--  计算机网络概述&lt;/a&gt;&lt;br&gt;
😑&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/&#34;&gt;计算机网络学习笔记（二）--  物理层&lt;/a&gt;&lt;br&gt;
😑&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/&#34;&gt;计算机网络学习笔记（三）--  数据链路层&lt;/a&gt;&lt;br&gt;
😑&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/&#34;&gt;计算机网络学习笔记（四）--  网络层&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-运输层协议概述&#34;&gt;1. 运输层协议概述&lt;/h3&gt;
&lt;!-- more --&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;进程之间的通信&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;向它上面的应用层提供通信服务。&lt;/li&gt;
&lt;li&gt;面向通信部分的最高层。&lt;/li&gt;
&lt;li&gt;用户功能中的最低层。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通信的真正端点井不是主机而是主机中的进程。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgtV54.png&#34; alt=&#34;tgtV54.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运输层的两个主要协议&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;用户数据报协议 UDP&lt;/strong&gt; (User Datagram Protocol)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;传输控制协议 TCP&lt;/strong&gt; (Transmission Control Protocol)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgN9Fe.png&#34; alt=&#34;tgN9Fe.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;运输层的端口&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;识别各应用层进程；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;只具有本地意义；&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;端口范围：（0 - 65535）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;①熟知端口号（0~1023）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;②登记（或注册）端口号（1024~49151）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;③客户（或动态、短暂）端口号（49152~65535）&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;套接字socket&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;套接字 socket = (IP 地址：端口号）&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;2-用户数据报协议-udp&#34;&gt;2. 用户数据报协议 UDP&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;特点&lt;/p&gt;
&lt;p&gt;① 无连接；（减少开销和发送时延）&lt;/p&gt;
&lt;p&gt;③ 尽最大努力交付；&lt;/p&gt;
&lt;p&gt;④ 面向报文；（对报文不分拆，不合并）&lt;/p&gt;
&lt;p&gt;⑤ 没有拥塞控制；&lt;/p&gt;
&lt;p&gt;⑥ 支持一对一，一对多，多对一，多对多的交互通信；&lt;/p&gt;
&lt;p&gt;⑦ 首部开销小。（8个字节）&lt;/p&gt;
&lt;p&gt;⑧无编号；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UDP首部格式&lt;/p&gt;
&lt;p&gt;有 8 个字节 ，由 4 个字段组成，每个字段的长度都是 2 个字节。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgNLtg.png&#34; alt=&#34;tgNLtg.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;(1) &lt;strong&gt;源端口&lt;/strong&gt;：源端口号。在需要对方回信时选用。不需要时可用全 0。&lt;/p&gt;
&lt;p&gt;(2) &lt;strong&gt;目的端口&lt;/strong&gt;：目的端口号。这在终点交付报文时必须使用。&lt;/p&gt;
&lt;p&gt;(3) &lt;strong&gt;长度&lt;/strong&gt;：UDP用户数据报的长度，其最小值是 8 （仅有首部）。&lt;/p&gt;
&lt;p&gt;(4) &lt;strong&gt;检验和&lt;/strong&gt;：检测 UDP 用户数据报在传输中是否有错。有错就丢弃。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgUE9J.png&#34; alt=&#34;tgUE9J.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;如果接收方 UDP 发现收到的报文中的目的端口号不正确，就丢弃该报文，并由网 ICMP 发送“端口不可达”差错报文给发送方。&lt;/p&gt;
&lt;p&gt;UDP 的通信是无连接的，虽然使用了端口号但不需要使用套接字。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UDP 计算检验和&lt;/p&gt;
&lt;p&gt;把首部和数据部分一起都检验，IP数据报是只检验首部&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgUhUU.png&#34; alt=&#34;tgUhUU.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;16 位的字视为 1 字节。若数据部分不是偶数个字节，则要填入一个全零字节（但此字节不发送）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-传输控制协议-tcp-概述&#34;&gt;3. 传输控制协议 TCP 概述&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;特点&lt;/p&gt;
&lt;p&gt;① 面向连接的服务；&lt;/p&gt;
&lt;p&gt;② 面向字节流；（无结构的字节流）&lt;/p&gt;
&lt;p&gt;③ 全双工通信；（发送、接收缓存）&lt;/p&gt;
&lt;p&gt;④ 复用和分用；（发送—复用，接收—分用）&lt;/p&gt;
&lt;p&gt;⑤ 进程到进程的通信；（点对点，每个进程都需要一个连接）&lt;/p&gt;
&lt;p&gt;⑥ 可靠的服务。（无差错，不丢失，不重复，按序到达）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TCP 连接&lt;/p&gt;
&lt;p&gt;TCP 之间的通信必须要在两个套接字之间建立连接。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TCP 连接：：＝ {socket, socket2} = { (IP1: port,), (IP2: port2) }&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-可靠传输的工作原理&#34;&gt;4. 可靠传输的工作原理&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;停止等待协议&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;无差错情况和出现差错&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tga0qx.png&#34; alt=&#34;tga0qx.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;A 向 B 发送，B 收到后向 A 发送确认报文，A 发送下一条报文。若超过一段时间 A 没有收到确认报文就重传该报文。&lt;/p&gt;
&lt;p&gt;A 在发送完一个分组后，必须暂时保留已发送的分组的副本，收到确认后才能销毁。&lt;/p&gt;
&lt;p&gt;分组和确认分组都必须进行编号。&lt;/p&gt;
&lt;p&gt;超时计时器设置的重传时间应当比数据在分组传输的平均往返时间更长一些。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确认丢失和确认迟到&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgdZex.png&#34; alt=&#34;tgdZex.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;信道利用率&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgdMfe.png&#34; alt=&#34;tgdMfe.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgd1ld.png&#34; alt=&#34;tgd1ld.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;当使用流水线传输时，就要使用&lt;strong&gt;连续 ARQ 协议&lt;/strong&gt;和&lt;strong&gt;滑动窗口协议&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;连续 ARQ 协议&lt;/p&gt;
&lt;p&gt;发送窗口，累积确认（对按序到达的最后一个分组发送确认）。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg0jOA.png&#34; alt=&#34;tg0jOA.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;对按序到达的最后一个分组发送确认&lt;/strong&gt;，这就表示：到这个分组为止的所有分组都已正确收到了。&lt;/p&gt;
&lt;p&gt;优点：简单易实现；缺点：Go-back-N，即首尾收到，中间报文段丢失，则要重传丢失报文后的所有报文。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-tcp-报文段的首部格式&#34;&gt;5. TCP 报文段的首部格式&lt;/h3&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgBmT0.png&#34; alt=&#34;tgBmT0.png&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;p&gt;​	最小长度是 20 字节，后面有 4n 字节是根据需要而增加的选项 (n 是整数)，最大长度 60 字节。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;源端口和目的端口：各占 2 个字节，分别写入源端口号和目的端口号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;序号：4 字节，使用 mod 2^32 运算。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确认号：4 字节，是期望收到对方下一个报文段的第一个数据字节的序号。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;若确认号＝ N, 则表明：到序号 N-1 为止的所有数据都已正确收到。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;数据偏移：占 4 位，即首部长度。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;保留：占 6 位，保留为今后使用，目前置为 0。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;紧急 URG：URG = 1 时，表明紧急指针字段有效，相当于优先级高的数据，要尽快传送。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确认 ACK：仅当 ACK = 1 时确认号字段才有效。当 ACK = 0 时，确认号无效。在TCP连接建立后所有传送的报文段都必须把 ACK 置 1。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;推送 PSH：PSH = 1 时，立即收到响应，不必等缓存满了之后再向上交付。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;复位 RST：RST = 1 时，表明 TCP 连接中出现严重差错，必须释放连接，然后再重新建立运输连接。还用来拒绝一个非法的报文段或拒绝打开一个连接。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;同步 SYN：在连接建立时用来同步序号，连接请求和连接接受。当 SYN = 1 ACK = 0 时，表明这是一个连接请求报文段。对方若同意建立连接，则应在响应的报文段中使 SYN = 1 ACK = 1 。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;终止 FIN：用来释放一个连接。当 FIN = 1 时，表明此报文段的发送方的数据已发送完毕，并要求释放运输连接。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;窗口：2 字节，指的是发送本报文段的一方的&lt;strong&gt;接收窗口&lt;/strong&gt;（而不是自己的发送窗口)，窗口值作为接收方让发送方设置其发送窗口的依据。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;窗口字段明确指出了现在允许对方发送的数据量。窗口值经常在动态变化着。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;检验和：2 字节。检验和字段检验的范围包括首部和数据这两部分，与UDP检验方法相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;紧急指针：2 字节。紧急指针仅在 URG = 1 时才有意义，它指向最后一字节的紧急数据。即使窗口为零时也可发送紧急数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选项：长度可变，最长可达 40 字节。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;最大报文段长度 MSS 选项: TCP数据报数据部分长度。&lt;/li&gt;
&lt;li&gt;时间戳选项：10 字节，其中最主要的字段是时间戳值字段 (4 字节）和时间戳回送回答字段 (4 字节): 用来计算往返时间 RTT，用于处理 TCP 序号超过 2^32 的情况。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-tcp-可靠传输的实现&#34;&gt;6. TCP 可靠传输的实现&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;以字节为单位的滑动窗口&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgsukt.png&#34; alt=&#34;tgsukt.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;小于 P1 的是已发送并已收到确认的部分，而大于 P3 的是不允许发送的部分。&lt;/p&gt;
&lt;p&gt;P3 - P1 = A 的发送窗口&lt;/p&gt;
&lt;p&gt;P2 - P1 ＝已发送但尚未收到确认的字节数&lt;/p&gt;
&lt;p&gt;P3 - P2 = 允许发送但当前尚未发送的字节数（又称为可用窗口或有效窗口）&lt;/p&gt;
&lt;p&gt;B 未按序收到，A 从31号重传，B收到后把接收窗口向前移动 3 个序号。A 在继续发送完序号 42 ~ 53 的数据后，指针 P2 向前移动和 P3 重合。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgsv38.png&#34; alt=&#34;tgsv38.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;超时重传时间的选择&lt;/p&gt;
&lt;p&gt;每当第一次测量到 RTT 样本时，  RTTs 值就取为所测量到的 RTT 样本 值。但以后每测量到一个新的 RTT 样本，就按下式重新计算一次  RTTs&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;新的 RTTs = (1 - α) x (旧的 RTTs) + α x (新的 RTT 样本)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;RTO (超时重传时间) = RTTs + 4 x RTTD (RTT 的偏差的加权平均值)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;新的 RTT0 = (1- β) x (旧的 RTTD)＋ β x | RTTs－新的 RTT 样本 |&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择确认 SACK&lt;/p&gt;
&lt;p&gt;首部选项加上允许 SACK 选项。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg66F1.png&#34; alt=&#34;tg66F1.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;7-tcp-的流量控制&#34;&gt;7. TCP 的流量控制&lt;/h3&gt;
&lt;p&gt;流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;利用滑动窗口实现流量控制&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg6bfP.png&#34; alt=&#34;tg6bfP.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;发送方的发送窗口不能超过接收方给出的接受窗口的数值；&lt;/p&gt;
&lt;p&gt;设置持续计时器来防止窗口由零变为非零导致的僵局。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;传输的效率（三种机制）&lt;/p&gt;
&lt;p&gt;① 维持一个等于MSS的变量来控制缓存。&lt;/p&gt;
&lt;p&gt;② 发送方的推送push操作。&lt;/p&gt;
&lt;p&gt;③ 计时器期限到了就将缓存数据装入报文段。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;8-tcp-的拥塞控制&#34;&gt;8. TCP 的拥塞控制&lt;/h3&gt;
&lt;p&gt;​	拥塞控制是全局的控制，以网络能够承受现有的网络负荷为前提；流量控制是端口的控制。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;TCP 的拥塞控制方法&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;慢开始和拥塞避免&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;发送方让自己的发送窗口等于拥塞窗口。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;判断网络拥塞的依据就是出现了超时。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;慢开始：以 MSS 作为发送窗口大小的初始值（拥塞窗口)，每经过一个传输轮次（从发送到确认)，cwnd就加倍；慢开始门限作为慢开始和拥塞避免的转换点；&lt;/p&gt;
&lt;p&gt;拥塞避免：每一个RTT，cwnd只加 1, (线性增长，加法增大)；&lt;/p&gt;
&lt;p&gt;出现拥塞时，慢开始门限设置为当前窗口值的一半(乘法减小)，cwnd设为1；&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;15&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg2pR0.png&#34; alt=&#34;tg2pR0.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;16&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg2nRx.png&#34; alt=&#34;tg2nRx.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;快重传和快恢复&lt;/p&gt;
&lt;p&gt;快重传：收到三个重复确认立即发送未被确认的报文段；&lt;/p&gt;
&lt;p&gt;快恢复：乘法减小后执行加法增大；&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;17&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgRxg0.png&#34; alt=&#34;tgRxg0.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TCP 拥塞控制流程图&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;18&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgWCbF.png&#34; alt=&#34;tgWCbF.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;9-tcp-的运输连接管理&#34;&gt;9. TCP 的运输连接管理&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;运输连接有三个阶段，即：连接建立、数据传送和连接释放。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TCP 连接的建立采用客户服务器方式。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;TCP 的连接建立&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;19&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tgWwVg.png&#34; alt=&#34;tgWwVg.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;第一次握手&lt;/p&gt;
&lt;p&gt;客户端向服务端发送连接请求报文段。该报文段的头部中 SYN = 1，ACK = 0，seq = x。请求发送后，客户端便进入***SYN-SENT*** 状态。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SYN = 1，ACK = 0 表示该报文段为连接请求报文。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;x 为本次TCP通信的字节流的初始序号。TCP规定：SYN = 1 的报文段不能有数据部分，但要消耗掉一个序号。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第二次握手&lt;/p&gt;
&lt;p&gt;服务端收到连接请求报文段后，如果同意连接，则会发送一个应答：SYN = 1，ACK = 1，seq=y，ack=x+1。该应答发送完成后便进入***SYN-RCVD*** 状态。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SYN = 1，ACK = 1 表示该报文段为连接同意的应答报文。&lt;/li&gt;
&lt;li&gt;seq = y 表示服务端作为发送者时，发送字节流的初始序号。&lt;/li&gt;
&lt;li&gt;ack = x + 1 表示服务端希望下一个数据报发送序号从x+1开始的字节。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第三次握手&lt;/p&gt;
&lt;p&gt;当客户端收到连接同意的应答后，还要向服务端发送一个确认报文段，表示：服务端发来的连接同意应答已经成功收到。该报文段的头部为：&lt;em&gt;&lt;strong&gt;ACK=1，seq=x+1，ack=y+1&lt;/strong&gt;&lt;/em&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;客户端发完这个报文段后便进入ESTABLISHED状态，服务端收到这个应答后也进入ESTABLISHED状态，此时连接的建立完成！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;为什么连接建立需要三次握手，而不是两次握手？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;背景：A首先发送一个连接请求，但是该请求在网络节点上滞留了，没有收到确认。于是A重传了一次请求，并且收到了B的确认，于是连接建立，数据传输完成后，释放连接。&lt;/p&gt;
&lt;p&gt;① 假定A发出的第一个请求报文段并没有丢失，而是在某些网络节点上滞留，本来是一个失效的请求，但B收到后误认为是A再次发出一个新请求，于是向A发送确认，同意建立连接。&lt;/p&gt;
&lt;p&gt;② 假定采用两次握手，那么只要B发出确认，则新的连接就建立了。由于A并没有发出请求，因此不理会B的确认，也不会向B发送数据，但B却以为新的连接已经建立，并一直等待A的数据，B的许多资源就这样白白浪费了。&lt;/p&gt;
&lt;p&gt;③ 假定采用三次握手，则B发出确认，但A因为并没有发请求，所以不理会B的确认，B没有收到A的确认，则连接建立失败，B知道连接建立失败。会回收资源。&lt;/p&gt;
&lt;p&gt;④ 极端的情况可能由于Client用户端多次重新发送请求数据而导致Server端最后建立了N多个响应在等待，因而造成极大的资源浪费！所以，“三次握手”很有必要。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;TCP 的连接释放&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;20&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/07/tg5isx.png&#34; alt=&#34;tg5isx.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;第一次挥手&lt;br&gt;
若A认为数据发送完成，则它需要向B发送连接释放请求。该请求只有报文头，头中携带的主要参数为：FIN = 1，seq = u。此时，A将进入FIN-WAIT-1状态。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FIN = 1 表示该报文段是一个连接释放请求。&lt;/li&gt;
&lt;li&gt;seq = u，u - 1 是A向B发送的最后一个字节的序号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第二次挥手&lt;br&gt;
B收到连接释放请求后，会通知相应的应用程序，告诉它A向B这个方向的连接已经释放。此时B进入 CLOSE-WAIT 状态，并向A发送连接释放的应答，其报文头包含：ACK = 1，seq = v，ack = u + 1。A收到该应答，进入 FIN-WAIT-2 状态，等待B发送连接释放请求。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ACK = 1：除TCP连接请求报文段以外，TCP通信过程中所有数据报的 ACK 都为1，表示应答。&lt;/li&gt;
&lt;li&gt;seq = v，v - 1 是B向A发送的最后一个字节的序号。&lt;/li&gt;
&lt;li&gt;ack = u + 1 表示希望收到从第 u+1 个字节开始的报文段，并且已经成功接收了前 u 个字节。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第二次挥手完成后，A到B方向的连接已经释放，B不会再接收数据，A也不会再发送数据。但B到A方向的连接仍然存在，B可以继续向A发送数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第三次挥手&lt;br&gt;
当B向A发完所有数据后，向A发送连接释放请求，请求头：FIN = 1，ACK = 1，seq = w，ack = u+1。B便进入 LAST-ACK 状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第四次挥手&lt;br&gt;
A收到释放请求后，向B发送确认应答，此时A进入TIME-WAIT 状态。该状态会持续 2MSL 时间，若该时间段内没有B的重发请求的话，就进入CLOSED状态，撤销TCB。当B收到确认应答后，也便进入CLOSED状态，撤销TCB。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;为什么挥手是四次，而握手时三次？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;握手时 ACK 和 SYN 可以放在一个报文里发送，但是关闭连接时，当收到对方的 FIN 报文，你未必完成所有数据，所以可能发送 ACK 确认收到 FIN，然后发送 FIN 表示关闭连接。&lt;/p&gt;
&lt;/blockquote&gt;
">👹计算机网络学习笔记（五）--  运输层</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/"" data-c="
          &lt;p&gt;😆&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/&#34;&gt;计算机网络学习笔记（一）--  计算机网络概述&lt;/a&gt;&lt;br&gt;
😆&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/&#34;&gt;计算机网络学习笔记（二）--  物理层&lt;/a&gt;&lt;br&gt;
😆&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/&#34;&gt;计算机网络学习笔记（三）--  数据链路层&lt;/a&gt;&lt;br&gt;
😆&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/&#34;&gt;计算机网络学习笔记（五）--  运输层&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-网络层提供的两种服务&#34;&gt;1. 网络层提供的两种服务&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;虚电路服务&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据报服务&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- more --&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trd2DO.png&#34; alt=&#34;trd2DO.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;2-网际协议-ip&#34;&gt;2. 网际协议 IP&lt;/h3&gt;
&lt;p&gt;网际协议 IP 是 TCP/IP 体系中两个最重要的协议之一，也是最重要的因特网标准协议之一。与 IP 协议配套是用的四个协议：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;地址解析协议 ARP&lt;/strong&gt;：是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;网际控制报文协议 ICMP&lt;/strong&gt;：提供差错报告和询问报文，以提高 IP 数据交付成功的机会&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;网际组管理协议 IGMP&lt;/strong&gt;：用于探寻、转发本局域网内的组成员关系。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trwlqO.png&#34; alt=&#34;trwlqO.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;​		ARP 画在最下面，因为 IP 经常要使用这个协议。 ICMP、IGMP 画在这一层的上部，因为它们要使用 IP 协议。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;虚拟互连网络&lt;/p&gt;
&lt;p&gt;因为没有一种单一的网络能够适应所有的用户需求，所以网络互连也变得困难，所以需要一些中间设备：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理层中间设备：&lt;strong&gt;转发器&lt;/strong&gt;(repeater)&lt;/li&gt;
&lt;li&gt;数据链路层中间设备：&lt;strong&gt;网桥或桥接器&lt;/strong&gt;(bridge)&lt;/li&gt;
&lt;li&gt;网络层中间设备：&lt;strong&gt;路由器&lt;/strong&gt;(router)&lt;/li&gt;
&lt;li&gt;网络层以上的中间设备：&lt;strong&gt;网关&lt;/strong&gt;(gateway)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;分类的 IP 地址&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IP 地址&lt;/strong&gt;就是给每个连接在因特网上的主机（或路由器）分配一个在全世界范围是唯一的 32 位的标识符。由因特网名字与号码指派公司 ICANN 进行分配。&lt;/p&gt;
&lt;p&gt;IP地址编制方法的三个阶段：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;分类的IP地址&lt;/li&gt;
&lt;li&gt;子网的划分&lt;/li&gt;
&lt;li&gt;构成超网&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;IP 地址：：＝｛＜网络号＞，＜主机号＞｝&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一个网络号在整个互联网范围内必须是唯一的，主机号在它前面的网络号所指明的网络范围内必须是唯一的。一个 IP 地址在整个互联网范围内是&lt;strong&gt;唯一的&lt;/strong&gt;。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trDisP.png&#34; alt=&#34;trDisP.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;A类
&lt;ul&gt;
&lt;li&gt;由1字节的网络地址和3字节主机地址组成。&lt;/li&gt;
&lt;li&gt;网络地址的最高位必须是“0“，可指派的网络数为2^7 - 2，减2的原因是&lt;strong&gt;0.0.0.0对应“本网络”&lt;/strong&gt;，另外一个是&lt;strong&gt;127.0.0.1是本地软件的回环地址&lt;/strong&gt;，用于测试自己电脑IP地址是否可用。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地址范围 1.0.0.0 到 126.255.255.255&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;最大主机数为 2^24 - 2 = 16777214 台，减2的原因是&lt;strong&gt;全0的主机号字段代表该IP地址是&amp;quot;本主机“&lt;/strong&gt;，&lt;strong&gt;全1表示”所有的“&lt;/strong&gt;，表示该网络上的所有主机。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;B类
&lt;ul&gt;
&lt;li&gt;由2字节的网络地址和2字节主机地址组成。&lt;/li&gt;
&lt;li&gt;网络地址的最高位必须是“10”，可指派的网络数为 2^14 -1，因为最高位为10，所以不存在全0全1的情况，但是B类网络地址&lt;strong&gt;128.0.0.0是不指派的&lt;/strong&gt;，可指派&lt;strong&gt;最小网络地址是128.1.0.0&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地址范围 128.0.0.0 - 191.255.255.255。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;最大主机数为2^16 - 2 = 65534台，减2同样是全0全1情况。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C类
&lt;ul&gt;
&lt;li&gt;由3字节的网络地址和1字节主机地址组成&lt;/li&gt;
&lt;li&gt;网络地址的最高位必须是“110”，可指派的网络数为2^21 - 1，192.0.0.0不指派，&lt;strong&gt;最小可指派网络地址是192.0.1.0&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地址范围192.0.0.0 - 223.255.255.255&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;最大主机数为2^8 - 2 = 254台，减2同样是全0全1情况。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D类是多播地址，“1110”开始&lt;/li&gt;
&lt;li&gt;E类地址保留为今后使用，“11110”开头&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trsECQ.png&#34; alt=&#34;trsECQ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IP 地址与硬件地址&lt;/p&gt;
&lt;p&gt;物理地址是数据链路层和物理层使用的地址，而 IP 地址是网络层和以上各层使用的地址，是一种逻辑地址。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tryeiD.png&#34; alt=&#34;tryeiD.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;IP 地址放在 IP数据报 的首部，而硬件地址放在 MAC帧 的首部。当数据报放入数据链路层的 MAC帧 中后，整个 IP数据报 就成为 MAC帧 的数据，因而在数据链路层看不见数据报的 IP 地址。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tryfyR.png&#34; alt=&#34;tryfyR.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;地址解析协议 ARP&lt;/p&gt;
&lt;p&gt;ARP是解决&lt;strong&gt;同一个局域网上&lt;/strong&gt;的主机或路由器的 &lt;strong&gt;IP 地址和硬件地址的映射问题&lt;/strong&gt;。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tr6STf.png&#34; alt=&#34;tr6STf.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;每个主机都有一个 &lt;strong&gt;ARP 高速缓存&lt;/strong&gt;，存放映射表。如果一个 IP 地址 到 MAC 地址的映射不在该表中，主机通过广播的方式发送 ARP 请求分组，匹配 IP 地址的主机会发送 &lt;strong&gt;ARP 响应分组&lt;/strong&gt;告知 MAC 地址。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tr68XR.png&#34; alt=&#34;tr68XR.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;A 收到 B 的 ARP响应分组后就在其 ARP 高速缓存中写入 B 主机 IP 地址到硬件地址的映射。同时 B 也会将 A的映射写入到自己的ARP 高速缓存。&lt;/p&gt;
&lt;p&gt;ARP 对保存在高速缓存中的每一个映射地址项目都设置生存时间。凡超过生存时间的项目就从高速缓存中删除掉。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IP 数据报的格式&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trgpRg.png&#34; alt=&#34;trgpRg.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;版本：IP协议的版本，目前的IP协议版本号为4，下一代IP协议版本号为6。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;首部长度：IP报头的长度。固定部分的长度（20字节）和可变部分的长度之和。共占4位。最大为1111，即10进制的15，代表IP报头的最大长度可以为15个32bits（4字节），也就是&lt;strong&gt;最长可为15*4=60字节&lt;/strong&gt;，除去固定部分的长度20字节，可变部分的长度最大为40字节。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;区分服务(服务类型)：占8位，未使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;总长度：IP报文的总长度。报头的长度和数据部分的长度之和。占16位，因此数据报的最大长度为2^16-1=65535字节（实际极少遇到）。&lt;/p&gt;
&lt;p&gt;在IP层下面的每一种数据链路层协议都规定了一个数据帧中的数据字段最大长度，这称为最大传送单元MTU。当一个IP数据报封装成链路层的帧时，此数据报的总长度(即首部加上数据部分)一定不能超过下面的数据链路层规定的MTU值。如：最常用的以太网就规定其MTU值是1500字节。若所传送的数据报长度超过数据链路层的MTU值，就必须把过长的数据报进行&lt;strong&gt;分片&lt;/strong&gt;处理。&lt;/p&gt;
&lt;p&gt;IP协议规定，在因特网中所有的主机和路由器，必须能够接受长度不超过576字节的数据报。即：假定上层交下来的数据长度有512字节，加上最长的IP首部60字节，再加上4字节的富裕量。否则就要进行分片。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;标识：唯一的标识主机发送的每一分数据报。通常每发送一个报文，它的值加一。当IP报文长度超过传输网络的MTU（最大传输单元）时必须分片，这个标识字段的值被复制到所有数据分片的标识字段中，使得这些分片在达到最终目的地时可以依照标识字段的内容&lt;em&gt;重新组成原先的数据&lt;/em&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;标志：共3位。R、DF、MF三位。目前只有后两位有效，DF(don’t fragment)位：为1表示不分片，为0表示分片。MF(more fragment)：为1表示“更多的片”，为0表示这是最后一片。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;片位移：本分片在原先数据报文中相对首位的偏移位。（需要再乘以8）&lt;/p&gt;
&lt;p&gt;IP数据报分片举例1：一数据报总长度3820字节，其数据部分3800字节长，需要分片为长度不超过1420字节的数据报片。因固定首部长度为20字节，因此每个数据报片的数据部分长度不能超过1400字节。于是分为3个数据报片，其数据部分的长度分别为1400，1400，1000字节。原始数据报首部被复制为各数据片的首部，但必须修改有关字段的值。分片结果如下：&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tr2FpD.png&#34; alt=&#34;tr2FpD.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tr2UA0.png&#34; alt=&#34;tr2UA0.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;生存时间：IP报文所允许通过的路由器的最大数量。每经过一个路由器，TTL减1，当为0时，路由器将该数据报丢弃。TTL 字段是由发送端初始设置一个 8 bit字段.推荐的初始值由分配数字 RFC 指定，当前值为 64。发送 ICMP 回显应答时经常把 TTL 设为最大值 255。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;协议：指出IP报文携带的数据使用的是那种协议，以便目的主机的IP层能知道要将数据报上交到哪个进程（不同的协议有专门不同的进程处理）。和端口号类似，此处采用协议号，TCP的协议号为6，UDP的协议号为17。ICMP的协议号为1，IGMP的协议号为2.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;首部校验和：&lt;strong&gt;只检验数据报的首部，但不包括数据部分。&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tr2O4f.png&#34; alt=&#34;tr2O4f.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;源IP地址：标识IP数据报的源端设备。32位&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;目的IP地址：标识IP数据报的目的地址。32位&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IP 层转发分组的流程&lt;/p&gt;
&lt;p&gt;每一条路由最主要的两个信息：&lt;strong&gt;（目的网络地址，下一跳地址）&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trRUrd.png&#34; alt=&#34;trRUrd.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;特定主机路由：可使网络管理人员更方便地控制网络和测试网络。&lt;/li&gt;
&lt;li&gt;默认路由：在一个网络只有很少的对外连接时很有用，可以以减小路由表所占用的空间和搜索路由表所用的时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trRXZR.png&#34; alt=&#34;trRXZR.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;分组转发算法：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;(1) 从数据报的首部提取目的主机的 IP 地址 D, 得出目的网络地址为 N。&lt;br&gt;
(2) 若网络 N 与此路由器直接相连，则把数据报直接交付目的主机 D；否则是间接交付，执行(3)。&lt;br&gt;
(3) 若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行(4)。&lt;br&gt;
(4) 若路由表中有到达网络 N 的路由，则把数据报传送给路由表指明的下一跳路由器；否则，执行(5)。&lt;br&gt;
(5) 若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则，执行(6)&lt;br&gt;
(6) 报告转发分组出错。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-划分子网和构造超网&#34;&gt;3. 划分子网和构造超网&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;两级IP地址缺陷&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP 地址空间的利用率有时很低。&lt;/li&gt;
&lt;li&gt;给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。&lt;/li&gt;
&lt;li&gt;两级的 IP 地址不够灵活&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;子网划分的基本思路&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;划分子网纯属一个单位内部的事情，单位对外仍然表现为没有划分子网的网络。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;原来的两级 IP 地址在本单位内部就变为三级 IP 地址：&lt;strong&gt;网络号、 子网号和主机号&lt;/strong&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IP 地址：：＝｛＜网络号＞，＜子网号＞，＜主机号＞｝&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;路由器在收到IP数据报后，按目标网络号和子网号定位目标子网。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;15&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trW7kt.png&#34; alt=&#34;trW7kt.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;子网掩码&lt;/p&gt;
&lt;p&gt;从 IP 数据报的首部无法看出源主机或目的主机所连接的网络是否进行了子网的划分。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;16&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trfEX4.png&#34; alt=&#34;trfEX4.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;把 IP 地址的子网掩码和收到的数据报的目的 IP 地址&lt;strong&gt;逐位相与&lt;/strong&gt; (AND) ，得出了所要找的子网的网络地址。&lt;/p&gt;
&lt;p&gt;如果一个网络不划分子网， 那么该网络的子网掩码就使用默认子网掩码。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;17&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trfyuQ.png&#34; alt=&#34;trfyuQ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;子网数是根据子网号(subnet-id) 计算出来的。若 subnet-id  &lt;em&gt;n&lt;/em&gt; 位，则共有 &lt;em&gt;2^n 种&lt;/em&gt;可能的排列。除去全 0 和全 1 这两种情况，就得出表中的子网数*(2^ n - 2)*。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;18&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trhJ2T.png&#34; alt=&#34;trhJ2T.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;同样的 IP 地址和不同的子网掩码可以得出相同的网络地址。但是，不同的掩码的效果是不同的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用子网时分组的转发&lt;/p&gt;
&lt;p&gt;使用子网划分后，路由表必须包含以下三项内容：&lt;strong&gt;目的网络地址、 子网掩码和下一跳地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在划分子网的情况下，路由器转发分组的算法如下：&lt;/p&gt;
&lt;p&gt;(1) 从收到的数据报的首部提取目的 IP 地址 D。&lt;/p&gt;
&lt;p&gt;(2) 先判断是否为直接交付。对路由器直接相连的网络逐个进行检查：用各网络的子网掩码和 D 逐位相”与 “(AND 操作），若匹配，则进行直接交付；否则就是间接交付，执行(3) 。&lt;/p&gt;
&lt;p&gt;(3) 若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行(4) 。&lt;/p&gt;
&lt;p&gt;(4) 对路由表中的每一行（目的网络地址，子网掩码，下一跳地址），用其中的子网掩码和 D 逐位相”与 “(AND 操作），其结果为 N 。若 N 与该行的目的网络地址匹配，则把数据报传送给该行指明的下一跳路由器；否则，执行(5) 。&lt;/p&gt;
&lt;p&gt;(5) 若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否 则，执行(6)&lt;/p&gt;
&lt;p&gt;(6) 报告转发分组出错。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;无分类编址 CIDR （构造超网）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;网络前缀&lt;/p&gt;
&lt;p&gt;CIDR 的记法是无分类的两级编址。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IP 地址：：＝｛＜网络前缀＞，＜主机号＞｝&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;前面部分是“网络前缀&amp;quot;（简称 “前缀＂），用来指明网络，后面部分则用来指明主机。&lt;/p&gt;
&lt;p&gt;“斜线记法 ”(slash notation) ，或称为 CIDR 记法，即在 IP 地址后面加上 斜线 &amp;quot;/&amp;quot;，然后写上网络前缀所占的位数。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;19&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trIvod.png&#34; alt=&#34;trIvod.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;CIDR 使用的地址掩码也可继续称为子网掩码。&lt;strong&gt;斜线记法中，斜线后面的数字就是地址掩码中 1 的个数。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;网络前缀越短，其地址块所包含的地址数就越多。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最长前缀匹配&lt;/strong&gt;，即选择两个匹配的地址中更具体的一个。使用二叉线索查找路由表。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;4-网际控制报文协议-icmp&#34;&gt;4. 网际控制报文协议 ICMP&lt;/h3&gt;
&lt;h5 id=&#34;为了更有效地转发ip数据报和提高交付成功的机会在网际层使用了icmpicmp允许主机或路由器报告差错情况和提供有关异常情况的报告&#34;&gt;为了更有效地转发IP数据报和提高交付成功的机会，在网际层使用了ICMP，ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;20&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trqsJJ.png&#34; alt=&#34;trqsJJ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ICMP报文的种类&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ICMP差错报告报文&lt;/li&gt;
&lt;li&gt;ICMP询问报文&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;21&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trqIFe.png&#34; alt=&#34;trqIFe.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;22&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trqvTS.png&#34; alt=&#34;trqvTS.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ICMP 询问报文有两种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;回送请求和回答报文：用来测试目的站是否可达以及了解其有关状态。由主机或路由器向一个特定的目的主机发出的询问。&lt;/li&gt;
&lt;li&gt;时间戳请求和回答报文：用于时钟同步和时间测量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-互联网的路由选择协议&#34;&gt;5. 互联网的路由选择协议&lt;/h3&gt;
&lt;p&gt;**静态路由选择策略（非自适应路由选择）**与  &lt;strong&gt;动态路由选择策略（自适应路由选择）&lt;/strong&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;分层次的路由选择协议&lt;/p&gt;
&lt;p&gt;把整个互联网划分为许多较小的自治系统，记做 &lt;strong&gt;AS&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;分类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;内部网关协议 IGP&lt;/strong&gt;：RIP 、OSPF 协议。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;外部网关协议 EGP&lt;/strong&gt;：BGP协议。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;23&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/trXvTK.png&#34; alt=&#34;trXvTK.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;内部网关协议 RIP&lt;/p&gt;
&lt;p&gt;​		RIP 是一种分布式的基于距离（也叫&lt;strong&gt;跳数&lt;/strong&gt;）向量的路由选择协议。RIP 允许一条路径最多只能包含 15 个路由器。因此“距离”等于 16 时即相当于不可达。可见 RIP 只适用于小型 互联网。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;特点&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;仅和相邻路由器交换信息。&lt;/li&gt;
&lt;li&gt;路由器交换的信息是当前本路由器所知道的全部信息，即自己现在的路由表。&lt;/li&gt;
&lt;li&gt;按固定的时间间隔交换路由信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;距离向量算法&lt;/p&gt;
&lt;p&gt;(1) 对相邻地址 X 发来的 RIP 报文，先将报文中的所有下一跳字段更改为 X，并把跳数都加一。&lt;/p&gt;
&lt;p&gt;(2) 对修改后的每条路由信息做下面的操作：&lt;/p&gt;
&lt;p&gt;​	①若原来的路由表中没有目的网络 N, 则把该项目添加到路由表中；否则执行②；&lt;/p&gt;
&lt;p&gt;​	②若下一跳路由器地址是 X, 则把收到的项目替换原路由表中的项；否则执行③；&lt;/p&gt;
&lt;p&gt;​	③若收到的项目中的距离小于路由表中的距离，则进行更新，否则什么也不做。&lt;/p&gt;
&lt;p&gt;(3) 若3分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达的路由器，即把距离置为 16。&lt;/p&gt;
&lt;p&gt;(4) 返回。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RIP 协议的报文格式&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;24&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/ts9P1S.png&#34; alt=&#34;ts9P1S.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;一个 RIP 报文最多可包括 25 个路由，因而 RIP 报文的最大长度是 4 + 20 X 25 = 504 字节。如超过，必须再用一个 RIP 报文来传送。&lt;/p&gt;
&lt;p&gt;优点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;实现简单，开销较小。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;好消息传得快，坏消息传的慢。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;25&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/ts9W38.png&#34; alt=&#34;ts9W38.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;内部网关协议 OSPF（开放最短路径优先）&lt;/p&gt;
&lt;p&gt;OSPF最主要的特征就是使用分布式的链路状态协议。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用&lt;strong&gt;洪泛法&lt;/strong&gt;向本自治系统中所有路由器发送信息。&lt;/li&gt;
&lt;li&gt;发送的信息是与本路由器相邻的所有路由器的链路状态。&lt;/li&gt;
&lt;li&gt;只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OSPF 协议报文格式&lt;/p&gt;
&lt;p&gt;OSPF 不用 UDP 而是直接用 IP 数据报传送。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;26&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tsiljS.png&#34; alt=&#34;tsiljS.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;​	(1) 版本当前的版本号是 2。&lt;/p&gt;
&lt;p&gt;​	(2) 类型可以是五种类型分组中的一种。&lt;/p&gt;
&lt;p&gt;​	(3) 分组长度 包括 OSPF 首部在内的分组长度，以字节为单位。&lt;/p&gt;
&lt;p&gt;​	(4) 路由器标识符 标志发送该分组的路由器的接口的 IP 地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OSPF 的五种分组类型&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;问候(Hello) 分组&lt;/strong&gt;，用来发现和维待邻站的可达性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据库描述(Database Description)分组&lt;/strong&gt;，向邻站给出自己的链路状态数据库 中的所有链路状态项目的摘要信息。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;链路状态请求(Link State Request)分组&lt;/strong&gt;，向对方请求发送某些链路状态项目的详细信息。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;链路状态更新(Link State Update)分组&lt;/strong&gt;，用洪泛法对全网更新链路状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;链路状态确认(Link State Acknowledgment)分组&lt;/strong&gt;，对链路更新分组的确认。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;每两个相邻路由器每隔 10 秒钟要交换一次问候分组。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;27&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tsF326.png&#34; alt=&#34;tsF326.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;28&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tsFdIA.png&#34; alt=&#34;tsFdIA.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;OSPF 还规定每隔一段时间，要刷新一次数据库中的链路状态。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;外部网关协议 BGP&lt;/p&gt;
&lt;p&gt;​		边界网关协议 BGP 只能是力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子），而并非要寻找一条最佳路由。 BGP 采用了路径向量路由选择协议，它与距离向量协议（如 RIP) 和链路状态协议（如 OSPF) 都有很大的区别。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;29&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tskUyT.png&#34; alt=&#34;tskUyT.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;​		BGP 发言人往往就是 BGP 边界路由器，但也可以不是 BGP 边界路由器。BGP 发言人与其他 AS BGP 发言人要交换路由信息，就要先建立 TCP 连接，然后在此连接上交换 BGP 报文以建立 BGP &lt;strong&gt;会话&lt;/strong&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;BGP 的四种报文类型&lt;/p&gt;
&lt;p&gt;(1) OPEN （打开）报文，用来与相邻的另一个 BGP 发言人建立关系，使通信初始化。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共有 6 个字段，即&lt;em&gt;版本&lt;/em&gt; (1 字节，现在的值是 4) 、&lt;em&gt;本自治系统号&lt;/em&gt; (2 字节， 使用全球唯一的 16 位自治系统号，由 ICANN 地区登记机构分配）、&lt;em&gt;保持时间&lt;/em&gt; (2 字节，以 秒计算的保持为邻站关系的时间）、 &lt;em&gt;BGP 标识符&lt;/em&gt; (4 字节，通常就是该路由器的 IP 地址）、 &lt;em&gt;可选参数长度&lt;/em&gt; (1 字节）和&lt;em&gt;可选参数&lt;/em&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(2) UPDATE （更新）报文，用来通告某一路由的信息，以及列出要撤销的多条路由。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共有 5 个字段，即&lt;em&gt;不可行路由长度&lt;/em&gt; (2 字节，指明下一个字段的长度）、 &lt;em&gt;撤销的路由&lt;/em&gt;（列出所有要撤销的路由）、&lt;em&gt;路径属性总长度&lt;/em&gt; (2 字节，指明下一个字段的长 度）、&lt;em&gt;路径属性&lt;/em&gt;（定义在这个报文中增加的路径的属性）和&lt;em&gt;网络层可达性信息 NLRI&lt;/em&gt; (Network Layer Reachability Information) 。最后这个字段定义发出此报文的网络，包括网络前缀的位数、 IP 地址前缀。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(3) KEEPALIVE （保活）报文，用来周期性地证实邻站的连通性。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;只有 BGP 19 字节长的通用首部。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(4) NOTIFICATION （通知）报文，用来发送检测到的差错。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有 3 个字段，即&lt;em&gt;差错代码&lt;/em&gt; (1 字节）、&lt;em&gt;差错子代码&lt;/em&gt; (1 字节）和&lt;em&gt;差错数据&lt;/em&gt;（给出有关差错的诊断信息）。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;30&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/05/tsAIDU.png&#34; alt=&#34;tsAIDU.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;路由器的构成&lt;/p&gt;
&lt;h5 id=&#34;路由器是一种具有多个输入端口和多个输出端口的专用计算机其任务是转发分组&#34;&gt;路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;路由器的结构&lt;/p&gt;
&lt;p&gt;由**路由选择部分（控制部分）**和  &lt;strong&gt;分组转发部分&lt;/strong&gt;组成。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;31&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyG1Og.png&#34; alt=&#34;tyG1Og.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;分组转发部分&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;输入端口&lt;/p&gt;
&lt;p&gt;为了使交换功能分散化，往往把复制的转发表放在每一个输入端口中，路由选择处理机负责对各转发表的副本(影子副本)进行更新。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;32&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyJKE9.png&#34; alt=&#34;tyJKE9.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;输出端口&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;33&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyJ336.png&#34; alt=&#34;tyJ336.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;交换结构&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;交换结构把分组从一个输入端口转移到某个合适的输出端口。&lt;/strong&gt;&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyJw4I.png&#34; alt=&#34;tyJw4I.png&#34; style=&#34;zoom: 67%;&#34; /&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;6-ipv6&#34;&gt;6. IPv6&lt;/h3&gt;
&lt;p&gt;IPv6 数据报由两大部分组成，即&lt;strong&gt;基本首部&lt;/strong&gt;和&lt;strong&gt;有效载荷(净负荷)&lt;/strong&gt;。有效载荷允许有零个或多个&lt;strong&gt;扩展首部&lt;/strong&gt;，但扩展首部不属于首部。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;IPv6的基本首部&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;34&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyJOa9.png&#34; alt=&#34;tyJOa9.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;35&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyJx8x.png&#34; alt=&#34;tyJx8x.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;版本&lt;/strong&gt;：占4位，IPv6 该字段是6.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;通信量类&lt;/strong&gt;：8位，区分不同的 IPv6 数据报的类别或优先级。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;流标号&lt;/strong&gt;：20位，对实时数据有用，对非实时数据无用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;有效载荷长度&lt;/strong&gt;：16位，表示除基本首部（包括扩展首部）以外的字节数，最大值是 64 KB。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;下一个首部&lt;/strong&gt;：8位，相当千 IPv4 的协议字段或可选字段。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;无扩展首部时，作用和 IPv4 的协议字段一样，它的值指出了基本首部后面的数据应交付 IP 层上面的哪一个高层协议（6代表TCP，17代表UDP）。&lt;/li&gt;
&lt;li&gt;有扩展首部时，值标识后面第一个扩展首部的类型。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;跳数限制&lt;/strong&gt;：8位，防止数据报在网络中无限期地存在。路由器在转发数据报时，要先把跳数限制字段中的值减1。为零时，就要把这个数据报丢弃。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;源地址&lt;/strong&gt;：128 位。发送端的 IP 地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;目的地址&lt;/strong&gt;：128 位。接收端的 IP 地址。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IPv6 的地址&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;三种目的地址类型：&lt;strong&gt;单播&lt;/strong&gt;，&lt;strong&gt;多播&lt;/strong&gt;，&lt;strong&gt;任播&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;每个IPv6地址&lt;strong&gt;128位&lt;/strong&gt;，采用&lt;strong&gt;冒号十六进制记法&lt;/strong&gt;。把每个 16 位的值用十六进制值表示，各值之间用冒号分隔。允许把数字前面的 0 省略，&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;68E6:8C64:FFFF:FFFF:0:1180:960A:FFFF  把 0000 中的前三个 0 省略了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一连串连续的零可以为一对冒号所取代(零压缩法)，但在一个地址中只能使用一次。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;FF05:0:0:0:0:0:0:B3  可记为  FF05: :B3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CIDR 的斜线表示法仍然可用。60 位的前缀 12AB00000000CD3(16进制表示，每个字符代表 4 位二进制数字)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;可记为12AB:0000:0000:CD30:0000:0000:0000:0000/60&lt;/p&gt;
&lt;p&gt;​	或12AB::CD30:0:0:0:0/60&lt;/p&gt;
&lt;p&gt;​	或12AB:0:0:CD30::/60&lt;/p&gt;
&lt;p&gt;不可记为12AB:0:0:CD3/60  (最后的0不能省略)&lt;/p&gt;
&lt;p&gt;​	或12AB::CD30/60 （这是地址 12AB:0:0:0:0:0:0:CD30 的前 60 位二进制）&lt;/p&gt;
&lt;p&gt;​	或12AB: :CD3/60 （这是地址 12AB:0:0:0:0:0:0:0CD3 的前 60 位二进制）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;36&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyanYj.png&#34; alt=&#34;tyanYj.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;37&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyal60.png&#34; alt=&#34;tyal60.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IPv4 IPv6 过渡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;双协议栈&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyas0O.png&#34; alt=&#34;tyas0O.png&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;隧道技术&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyagtH.png&#34; alt=&#34;tyagtH.png&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ICMPv6&lt;/p&gt;
&lt;p&gt;地址解析协议 ARP 和网际组管理协议 IGMP 的功能都被合并到 ICMPv6。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;38&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyaoB8.png&#34; alt=&#34;tyaoB8.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyazuV.png&#34; alt=&#34;tyazuV.png&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;7-ip多播&#34;&gt;7. IP多播&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;概念&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tydaVS.png&#34; alt=&#34;tydaVS.png&#34; style=&#34;zoom: 67%;&#34; /&gt;
&lt;p&gt;多播数据报和一般的 IP 数据报的区别就是它使用 &lt;strong&gt;D类&lt;/strong&gt; IP 地址作为目的地址，&lt;strong&gt;地址范围是 224.0.0.0 到 239.255.255.255&lt;/strong&gt;，并且首部中的协议字段值是 2, 表明使用网际组管理协议 IGMP。&lt;strong&gt;多播地址只能用于目的地址，而不能用于源地址&lt;/strong&gt;。多播数据报不产生 ICMP 差错报文。&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tywKs0.png&#34; alt=&#34;tywKs0.png&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IP 多播需要两种协议&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;网际组管理协议 IGMP&lt;/strong&gt; 和 &lt;strong&gt;多播路由选择协议&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;IGMP&lt;/p&gt;
&lt;p&gt;IGMP 协议是让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或退出了某个多播组。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多播路由选择协议&lt;/p&gt;
&lt;p&gt;把多播数据报用最小代价传送给所有的组成员。&lt;/p&gt;
&lt;p&gt;三种方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;洪泛与剪除。&lt;/li&gt;
&lt;li&gt;隧道技术。&lt;/li&gt;
&lt;li&gt;基于核心的发现技术。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;8-虚拟专用网-vpn-和网络地址转换-nat&#34;&gt;8. 虚拟专用网 VPN 和网络地址转换 NAT&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;虚拟专用网 VPN&lt;/p&gt;
&lt;p&gt;仅在本机构有效的 IP 地址称为本地地址，全球唯一的 IP 地址称为全球地址。&lt;strong&gt;专用地址&lt;/strong&gt;(&lt;strong&gt;可重用地址&lt;/strong&gt;)只能用做本地地址不能用作全球地址。&lt;strong&gt;在互联网中的所有路由器，对目的地址是专用地址的数据报一 律不进行转发。&lt;/strong&gt;&lt;/p&gt;
&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyBOaT.png&#34; alt=&#34;tyBOaT.png&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;p&gt;A、B内部的通信量都不经过互联网，X 和 Y 通信时，X将报文交付给R1，经R1加密后，重新加上数据报首部，此时源地址变为R1，目的地址变为R2。R2收到后进行解密，发现目的地址是Y，将报文交付给Y。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络地址转换 NAT&lt;/p&gt;
&lt;p&gt;解决的问题就是专用网内部的一些主机本来已经分配到了本地 IP 地址 （即仅在本专用网内使用的专用地址），但现在又想和互联网上的主机通信。&lt;/p&gt;
&lt;p&gt;方法：安装NET路由器，它至少有一个有效的外部全球 IP 地址，NAT 路由器上将其本地地址转换成全球 IP 地址就能实现本地地址和全球地址通信了。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;39&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyrUhD.png&#34; alt=&#34;tyrUhD.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;通过 NAT 地址转换表将旧的目的 IP 地址, 转换为新的目的 IP 地址。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;40&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/06/tyssxJ.png&#34; alt=&#34;tyssxJ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
">🤖计算机网络学习笔记（四）--  网络层</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/"" data-c="
          &lt;p&gt;😀&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/&#34;&gt;计算机网络学习笔记（一）--  计算机网络概述&lt;/a&gt;&lt;br&gt;
😃&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/&#34;&gt;计算机网络学习笔记（二）--  物理层&lt;/a&gt;&lt;br&gt;
😃&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/&#34;&gt;计算机网络学习笔记（四）--  网络层&lt;/a&gt;&lt;br&gt;
😃&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/&#34;&gt;计算机网络学习笔记（五）--  运输层&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;数据链路层使用的信道有两种类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;点对点信道&lt;/li&gt;
&lt;li&gt;广播信道&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;
&lt;h3 id=&#34;1-使用点对点信道的数据链路层&#34;&gt;1. 使用点对点信道的数据链路层&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;数据链路和帧&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;链路&lt;/strong&gt; ：从一个结点到相邻结点的一段物理线路。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;数据链路&lt;/strong&gt; ：把实现这些协议的硬件和软件加载链路上。&lt;br&gt;
现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。一般的适配器都包括了数据链路层和物理层这两层的功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;帧&lt;/strong&gt;：点对点信道的数据链路层的协议数据单元。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t05kPf.png&#34; alt=&#34;t05kPf.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;点对点信道通信时的主要步骤&lt;/strong&gt;：
&lt;ol&gt;
&lt;li&gt;结点 A 的数据链路层把网络层交下来的 IP 数据报添加首部和尾部封装成帧。&lt;/li&gt;
&lt;li&gt;结点 A 把封装好的帧发送给结点 B 的数据链路层。&lt;/li&gt;
&lt;li&gt;若结点 B 的数据链路层收到的帧无差错，则从收到的帧中提取出 IP 数据报交给上面的网络层；否则丢弃这个帧。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;数据链路层三个基本问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;封装成帧&lt;/p&gt;
&lt;p&gt;就是在一段数据的前后分别&lt;strong&gt;添加首部&lt;/strong&gt;（帧开始符 SOH 01）和&lt;strong&gt;尾部&lt;/strong&gt;（帧结束符 EOT 04），然后就构成了一个&lt;strong&gt;帧&lt;/strong&gt;。（数据部分 &amp;lt;= 长度限制 MTU）首部和尾部的一个重要作用就是进行帧定界。&lt;br&gt;
&lt;strong&gt;帧定界是分组交换的必然要求&lt;/strong&gt;。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0IK6e.png&#34; alt=&#34;t0IK6e.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0IJtP.png&#34; alt=&#34;t0IJtP.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;透明传输&lt;/p&gt;
&lt;p&gt;为了达到透明传输（即传输的数据部分不会因为包含SOH和EOT而出错），在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(十六进制1B)&lt;br&gt;
&lt;strong&gt;透明传输避免消息符号与帧定界符号相混淆&lt;/strong&gt;。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0IxHA.png&#34; alt=&#34;t0IxHA.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;差错检测&lt;/p&gt;
&lt;p&gt;现实通信链路中比特在传输中会产生差错，传输错误的比特占比称为&lt;strong&gt;误码率BER&lt;/strong&gt;，为了保证可靠性，通常通过&lt;strong&gt;循环冗余检验CRC&lt;/strong&gt;来做差错检测。&lt;br&gt;
&lt;strong&gt;差错检测防止无效数据帧浪费后续路由上的传输和处理资源&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;循环冗余检验CRC&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;​		在发送端将数据分组，每组 &lt;em&gt;k&lt;/em&gt; bit，在待传送数据 &lt;em&gt;M&lt;/em&gt; (&lt;em&gt;k&lt;/em&gt; bit) 后添加 &lt;em&gt;n&lt;/em&gt; 位冗余码，构成一个帧发送出去，因此一共发送 &lt;em&gt;k+n&lt;/em&gt; bit。&lt;/p&gt;
&lt;p&gt;​		利用&lt;strong&gt;模二运算&lt;/strong&gt;（不进位，不借位）计算 &lt;em&gt;2^n x M / P&lt;/em&gt;, 即在待传送数据 &lt;em&gt;M&lt;/em&gt; 后加 n 个0作为被除数，除以商定好的除数 &lt;em&gt;P&lt;/em&gt;（比 n 多一位），得到的&lt;/p&gt;
&lt;p&gt;余数 &lt;em&gt;R&lt;/em&gt; （比 &lt;em&gt;n&lt;/em&gt; 少一位）即为冗余码，将其拼接到数据 &lt;em&gt;M&lt;/em&gt; 后发送出去。为了进行检错而添加的冗余码常称为帧检验序列 &lt;em&gt;FCS&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;​		在接收端把接收到的数据以帧为单位进行 CRC 检验：把收到的每一个帧都除以同样的 除数 &lt;em&gt;P&lt;/em&gt;（模二运算），然后检查得到的余数 &lt;em&gt;R&lt;/em&gt; 如果在传输过程中&lt;strong&gt;无差错，那么经过 CRC 检验后得出的余数肯定是0&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;​		若 &lt;em&gt;M&lt;/em&gt; = 101001(即&lt;em&gt;k&lt;/em&gt; = 6)，除数 &lt;em&gt;P&lt;/em&gt; = 1101, 还可表示为 &lt;em&gt;P(X) = X^3 + X^2 + 1&lt;/em&gt;，此时被除数 &lt;em&gt;2^n x M&lt;/em&gt; 为101001000除以 &lt;em&gt;P&lt;/em&gt; 的余数 &lt;em&gt;R&lt;/em&gt; 为001。因此加上 &lt;em&gt;FCS&lt;/em&gt; 后发送的帧是 101001001。接收端被除数即为 101001001，除以除数 &lt;em&gt;P&lt;/em&gt; 得到余数 &lt;em&gt;R&lt;/em&gt;。若 &lt;em&gt;R&lt;/em&gt; = 0，帧无错，接受；若 &lt;em&gt;R&lt;/em&gt; ≠ 0，帧出错(无法判断哪一位出错)，丢弃。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;在数据链 路层使用 CRC 检验，能够实现无比特差错的传输，但这还不是可靠传输。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对于通信质量良好的有线传输链路，不要求数据链路层向上提供可靠传输的服务。改正差错的任务就由上层协议（例如，运输层的 TCP 协议）来完成。 对于通信质量较差的无线传输链路，数据链路层协议使用确认和重传机制，数据链路层向上提供可靠传输的服务。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;2-点对点协议-ppp&#34;&gt;2. 点对点协议 PPP&lt;/h3&gt;
&lt;h5 id=&#34;ppp-协议就是用户-计算机和-isp-进行通信时所使用的数据链路层协议&#34;&gt;PPP 协议就是用户 计算机和 ISP 进行通信时所使用的数据链路层协议。&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBaXtI.png&#34; alt=&#34;tBaXtI.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;!-- more --&gt;
&lt;!-- more --&gt;
&lt;p&gt;在 TCP/IP 协议族中，可靠传输由运输层的 TCP 协议负责，因此数据链路层的 PPP 议不需要进行纠错，不需要设置序号，也不需要进行流量控制。 PPP 协议不支待多点线路 （即一个主站轮流和链路上的多个从站进行通信），而&lt;strong&gt;只支持点对点的链路通信&lt;/strong&gt;。此外， PPP 协议&lt;strong&gt;只支持全双工链路&lt;/strong&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;PPP 协议的组成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个将 IP 数据报封装到串行链路的方法。&lt;/li&gt;
&lt;li&gt;链路控制协议 LCP (Link Control Protocol)，用来建立、测试、配置数据链路连接。&lt;/li&gt;
&lt;li&gt;网络控制协议 NCP (Network Control Protocol)，用来支持不同的网络层协议。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PPP 协议帧格式&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBPn9U.png&#34; alt=&#34;tBPn9U.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;若出现连续两个标志字段，就表示这是一个空帧，应当丢弃。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首部中的标志字段F(Flag)，规定为0x7E(符号0x表示它后面的字符是用十六进制表示的)。十六进制的7E的二进制表示是01111110)，标志字段表示一个帧的开始或结束。&lt;/li&gt;
&lt;li&gt;首部中的地址字段A规定为0xFF(即11111111)，没有携带PPP协议帧的信息。&lt;/li&gt;
&lt;li&gt;首部中的控制字段C规定为0x03(即00000011)，没有携带PPP协议帧的信息。&lt;/li&gt;
&lt;li&gt;首部中的2字节的协议字段：&lt;br&gt;
(1) 当协议字段为0x0021时，PPP帧的信息字段就是IP数据报。&lt;br&gt;
(2) 当协议字段为0xC021时，PPP帧的信息字段就是PPP链路控制协议LCP的数据。&lt;br&gt;
(3) 当协议字段为0x8021时，PPP帧的信息字段就是网络层的控制数据。&lt;/li&gt;
&lt;li&gt;信息部分不超过1500字节。&lt;/li&gt;
&lt;li&gt;尾部中的第一个字段(2个字节)是使用CRC的帧检验序列FCS。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;透明传输的实现方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当信息字段中出现和标志字段一样的比特(0x7E)组合时，就必须采取一些措施使这种形式上和标志字段一样的比特组合不出现在信息字段中。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;字节填充——PPP使用异步传输&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当 PPP 用在异步传输时，就使用一种特殊的字符填充法：将每一个 0x7E字节变为(0x7D, 0x5E)，0x7D转变成为(0x7D, 0x5D)。ASCII 码的控制字符（即数值小于 0x20 的字符），则在前面要加入0x7D，同时将该字符的编码加以改变。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;零比特填充——PPP使用同步传输&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;只要发现有5个连续的1，则立即填入一个0。接收端把5个连续的1后的0比特删除。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PPP 协议工作状态&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;链路静止  --  建立物理层  --  链路建立  --  PC发LCP  --  NCP分配IP地址  --  链路打开，网络层建立。（释放时倒过来）&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBFzh6.png&#34; alt=&#34;tBFzh6.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-使用广播信道的数据链路层&#34;&gt;3. 使用广播信道的数据链路层&lt;/h3&gt;
&lt;h5 id=&#34;广播信道可以进行一对多的通信局域网具有广播功能局域网上的主机可共享连接在局-域网上的各种硬件和软件资源&#34;&gt;广播信道可以进行一对多的通信，局域网具有广播功能，局域网上的主机可共享连接在局 域网上的各种硬件和软件资源。&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;局域网的数据链路层（局域网的数据链路层被拆分为了两个子层）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;逻辑链路控制LLC子层&lt;/strong&gt;：与传输媒体无关。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;媒体接入控制MAC子层&lt;/strong&gt;：与接入到传输媒体有关的内容都放在 MAC 子层，和局域网都对 LLC 子层来说是透明的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;适配器（网卡）的作用&lt;/p&gt;
&lt;p&gt;包含了***数据链路层***及***物理层***这两个层次的功能。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBAyLQ.png&#34; alt=&#34;tBAyLQ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CSMA/CD 协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;仅当数据帧中的目的地址与适配器 ROM 中存放的硬件地址(MAC 地址)一致时，该适配器才能接收这个数据帧。适配器对不是发送给自己的数据帧就丢弃。&lt;/p&gt;
&lt;p&gt;以太网采用 CSMA/CD协议(&lt;em&gt;&lt;strong&gt;载波监听多点接入／碰撞检测&lt;/strong&gt;&lt;/em&gt;) 的方式来协调总线上各计算机的工作。具有两个特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;提供的服务是尽最大努力的交付，即不可靠的交付。&lt;/li&gt;
&lt;li&gt;双向交替通信（半双工）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;csmacd协议的要点&#34;&gt;CSMA/CD协议的要点：&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;**“多点接入”**就是计算机以多点接入（动态媒体接入控制）的方式连接在一根总线上。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;**“载波监听”**就是”检测信道”，不管在发送前，还是在发送中，每个站都必须不停地检测信道。在发送前检测信道，是为了获得发送权。在发送中检测信道，是为了及时发现有 没有其他站的发送和本站发送的碰撞。即碰撞检测。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;**“碰撞检测”**就是“边发送边监听”，即适配器边发送数据边检测信道上的信号电压的变化情况。当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;把总线上的单程端到端传播时延记为 &lt;em&gt;τ&lt;/em&gt; ，A 发送数据后，最迟要经过 &lt;em&gt;2τ&lt;/em&gt; 才能知道自己发送的数据和其他站发送的数据有没有发生碰撞。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBZtZ4.png&#34; alt=&#34;tBZtZ4.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;电磁波在 1km 电缆的传播时延约为 &lt;em&gt;5µs&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;以太网的端到端往返时间 &lt;em&gt;2τ&lt;/em&gt; 称为&lt;em&gt;&lt;strong&gt;争用期***，又叫&lt;/strong&gt;碰撞窗口&lt;/em&gt;* 。&lt;strong&gt;经过争用期这 段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;以太网使用&lt;strong&gt;截断二进制指数退避算法&lt;/strong&gt;来确定碰撞后&lt;strong&gt;重传&lt;/strong&gt;的时机。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;协议规定了基本退避时间为争用期 &lt;em&gt;2τ&lt;/em&gt;, 具体的争用期时间是 &lt;em&gt;&lt;strong&gt;51.2 µs&lt;/strong&gt;&lt;/em&gt; 。对于 10 Mbit/s 以太网，在争用期内可发送 512 bit, 即 64字节。也可以说争用期是 512 比特时间。可以直接使用&lt;strong&gt;比特&lt;/strong&gt;作为争用期的单位。争用期是 512bit, 即争用期是发送 512bit 所需的时间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;从 &lt;em&gt;[0,1, …，（2k -1)]&lt;/em&gt; 中随机取出一个数，记为 &lt;em&gt;r&lt;/em&gt; 。重传应推后的时间就是 &lt;em&gt;&lt;strong&gt;r 倍的争用期&lt;/strong&gt;&lt;/em&gt;。&lt;/p&gt;
&lt;div align=&#34;center&#34;&gt;k=Min［重传次数， 10]&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;当重传达 16 次仍不能成功时（这表明同时打算发送数据的站太多，以致连续发生冲突），则丢弃该帧，并向高层报告。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最短帧长 64 字节，即 512 bit 。如果要发送的数据非常少，那么必须加入一些填充字节，使帧长不小于 64 字节。&lt;strong&gt;凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧&lt;/strong&gt;。只要收到了这种无效帧，就应当立即将其丢弃。&lt;/p&gt;
&lt;h5 id=&#34;强化碰撞&#34;&gt;强化碰撞：&lt;/h5&gt;
&lt;p&gt;​		当发送数据的站一旦发现发生了碰撞时，除了立即停止发送数据外，还要再继续发送 32 比特或 48 比特的&lt;em&gt;人为干扰信号&lt;/em&gt;，以便让所有用户都知道现在已经发生了碰撞。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBnhWR.png&#34; alt=&#34;tBnhWR.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;​		总线被占用的时间是 &lt;em&gt;TB+ TJ + τ&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规定帧间最小间隔为 9.6 µs&lt;/strong&gt;, 相当于 96 比特时间。这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。&lt;/p&gt;
&lt;h5 id=&#34;总结&#34;&gt;总结：&lt;/h5&gt;
&lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBuw7D.md.png&#34; alt=&#34;tBuw7D.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h5 id=&#34;以太网的信道利用率&#34;&gt;以太网的信道利用率&lt;/h5&gt;
&lt;p&gt;&lt;em&gt;a&lt;/em&gt; 是以太网单程端到端时延 &lt;em&gt;2τ&lt;/em&gt; 与帧的发送时间 &lt;em&gt;To&lt;/em&gt; 之比：&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBMVs0.png&#34; alt=&#34;tBMVs0.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;当 a -&amp;gt; 0 时表示只要一发生碰撞，就立即可以检测出来，并立即停止发送，因而信道资源被浪费的时间非常非常少。反之，参数 &lt;em&gt;a&lt;/em&gt; 越大，表明争用期所占的比例越大，使得信道利用率明显降低。当数据率一定时，以太网的连线的长度受到限制（否则 &lt;em&gt;τ&lt;/em&gt; 的数值 会太大），同时以太网的帧长不能太短（否则 &lt;em&gt;τ&lt;/em&gt; 的值会太小，使 &lt;em&gt;To&lt;/em&gt; 值太大）。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBQccR.png&#34; alt=&#34;tBQccR.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;只有当参数 &lt;em&gt;a&lt;/em&gt; 远小于 1 才能得到尽可能高的极限信道利用率。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;4-以太网的mac层&#34;&gt;4. 以太网的MAC层&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MAC地址&lt;br&gt;
&lt;strong&gt;MAC地址&lt;/strong&gt;又叫做硬件地址或物理地址，实际上就是适配器地址或适配器标识符EUI-48。高位24位：注册管理机构 RA，组织唯一标识符 OUI，低位24位：由厂家自行指派，称为扩展标识符。&lt;/p&gt;
&lt;p&gt;路由器如果同时连接到两个网络上，那么它就需要两个适配器和两个硬件地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MAC帧的格式&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBGEQJ.png&#34; alt=&#34;tBGEQJ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;以太网V2的MAC帧由五个字段组成。前两个字段分别为6字长的目标地址和源地址字段。第三个字段是2字节的类型字段，用来标志上一层使用的是什么协议，以便把收到的MAC帧的数据上交给上一层的这个协议。后面数据字段46~1500字节，帧检验序列FCS字段4个字节（使用 CRC 检验）。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;接收方可以很容易地通过发送方网络适配器的接口上的电压是否变化找到以太网帧的结束位置&lt;/em&gt;。在这个位置往前数 4 字节 (FCS 字段长度是 4 字节），就能确定数据字段的结束位置。因此MAC帧首部中不需要帧长度字段。&lt;/p&gt;
&lt;p&gt;当数据字段的长度小千 46 字节时， MAC 子层就会在数据字段的后面加入一个整数字节的&lt;em&gt;填充字段&lt;/em&gt;，以保证以太网的 MAC 帧长不小于 64 字节。&lt;/p&gt;
&lt;p&gt;为了接收端迅速实现位同步，从 MAC 子层向下传到物理层时还要在帧的前面插入8字节（由硬件生成），它由两个字段构成。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一个字段是 个字节的前同步码 (1 交替码），它的作用是“实现位同步”（比特同步）。&lt;/li&gt;
&lt;li&gt;第二个字段是帧开始定界符，定义为 10101011 。它的前六位的作用和前同步码一样，最后的两个连续1的就是告诉接收端适配器： “MAC 帧的信息马上就要来了，请适配器注意接收&#39;。MAC 帧的 FCS 字段的检验范围不包括前同步码和帧开始定界符。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;无效的 MAC 帧：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;帧的长度不是整数个字节；&lt;/li&gt;
&lt;li&gt;用收到的帧检验序列 FCS 查出有差错；&lt;/li&gt;
&lt;li&gt;收到的帧的 MAC 客户数据字段的长度不在 46 ~ 1500 字节之间。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-扩展的以太网&#34;&gt;5. 扩展的以太网&lt;/h3&gt;
&lt;h5 id=&#34;扩展的以太网在网络层看来仍然是一个网络&#34;&gt;扩展的以太网在网络层看来仍然是一个网络。&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;在物理层扩展以太网&lt;/p&gt;
&lt;p&gt;扩展主机和集线器之间的距离的一种简单方法就是使用光纤（通常是一对光纤）和一对光纤调制解调器。&lt;/p&gt;
&lt;p&gt;光纤调制解调器的作用就是进行&lt;em&gt;电信号和光信号的转换&lt;/em&gt;。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBYkr9.png&#34; alt=&#34;tBYkr9.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;优点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;跨网络通信。&lt;/li&gt;
&lt;li&gt;扩大了以太网覆盖的地理范围。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;扩大了碰撞域。&lt;/li&gt;
&lt;li&gt;不同的局域网使用不同的以太网技术（如数据率不同），那么就不可能用集线器将它们互连起来（速率向下兼容）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在数据链路层扩展以太网&lt;/p&gt;
&lt;h5 id=&#34;网桥自学习算法&#34;&gt;网桥（自学习算法）&lt;/h5&gt;
&lt;h5 id=&#34;以太网交换机第二层交换机-即多接口网桥强调这种交换机工作在数据链路层&#34;&gt;以太网交换机（第二层交换机 ），即多接口网桥，强调这种交换机工作在数据链路层。&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;特点&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;全双工方式通信。&lt;/li&gt;
&lt;li&gt;并行。&lt;/li&gt;
&lt;li&gt;相互通信的主机都是独占传输媒体，无碰撞地传输数据。&lt;/li&gt;
&lt;li&gt;接口还有存储器，能在输出端口繁忙时把到来的帧进行缓存。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自学习功能&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;15&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBt5p8.png&#34; alt=&#34;tBt5p8.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;​		A 先向 B 发送一帧，从接口 1 进入到交换机。交换机收到帧后，先查找交换表，没有查到应从哪个接口转发这个帧（在 MAC 地址这一列中，找不到目的地址为 B 的项目）。然后，交换机把这个帧的源地址 A 和接口 1 写入交换表中并向除接口,以外的所有接口广播这个帧。C 和 D 丢弃该帧，因为目的地址不对。只有 B 才收下这个目的地址正确的帧。此即为&lt;strong&gt;过滤&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;​		以后不管从哪一个接口收到帧，只要其目的地 址是 A, 就应当把收到的帧从接口 1 转发出去。&lt;/p&gt;
&lt;p&gt;​		B 向 A 发送帧时，交换机把这个帧的源地址 B 和接口 3 写入交换表中，此时不再广播，因为交换表中已经存在 A 的地址。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;虚拟局域网VLAN&lt;/p&gt;
&lt;p&gt;每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机属于哪一个 VLAN，而与物理位置无关。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;16&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBUZan.png&#34; alt=&#34;tBUZan.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;VLAN 标记的前两个字节总是设置为 0x8100 （即二进制的 10000001 00000000) ，称为 IEEE 802.1Q 标记类型。&lt;/p&gt;
&lt;p&gt;VLAN 标识符 VID(VLANID) ，它唯一地标志了这个以太网帧属于哪一个 VLAN。&lt;/p&gt;
&lt;p&gt;由于用于 VLAN 的以太网帧的首部增加了 4 个字节，因此以太网的最大帧长从原来的 1518 字节 (1500 字节的数据加上 18 字节的首部）变为 1522 字节。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;6-高速以太网&#34;&gt;6. 高速以太网&lt;/h3&gt;
&lt;p&gt;此部分转载自CSDN，&lt;a href=&#34;%5Bhttps://blog.csdn.net/KnightOnHourse/article/details/80198611?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522159127115919725219954270%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;amp;request_id=159127115919725219954270&amp;amp;biz_id=0&amp;amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-80198611.ecpm_v1_rank_ctr_v1&amp;amp;utm_term=%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91%5D(https://blog.csdn.net/KnightOnHourse/article/details/80198611?ops_request_misc=%7B%22request%5Fid%22%3A%22159127115919725219954270%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;amp;request_id=159127115919725219954270&amp;amp;biz_id=0&amp;amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-80198611.ecpm_v1_rank_ctr_v1&amp;amp;utm_term=%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91)&#34;&gt;原文地址&lt;/a&gt;（如侵删）&lt;/p&gt;
&lt;div class=&#34;htmledit_views prism-atom-one-light&#34; id=&#34;content_views&#34;&gt;
                                            &lt;div class=&#34;blogpost-body&#34;&gt;&lt;p&gt;&lt;strong&gt;1. 100M以太网&lt;/strong&gt;&lt;/p&gt;&lt;p align=&#34;center&#34;&gt;快速以太网（100M）标准&lt;/p&gt;&lt;div align=&#34;center&#34;&gt;&lt;div class=&#34;table-box&#34;&gt;&lt;table border=&#34;1&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;名称&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;传输介质&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;网段最大长度&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;center&#34;&gt;特点&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;100BASE-TX&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;100m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;两对UTP5类线或屏蔽双绞线&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;100BASE-T4&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;100m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;四对UTP3类线或5类线&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;100BASE-FX&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光纤&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;2000m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;两根光纤，发送和接收各用一根，全双工，长距离&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;（1）100BASE-T是在双绞线上传送100Mb/s基带信号的星型拓扑的以太网，仍使用IEEE802.3的CSMA/CD协议，它又称为快速以太网（FastEthernet）&lt;/p&gt;&lt;p&gt;（2）使用交换机组建的100BASE-T以太网，可在全双工方式下工作而无冲突发生。因此，&lt;span style=&#34;color:#ff00ff;&#34;&gt;&lt;strong&gt;CSMA/CD协议对全双工方式工作的快速以太网是不起作用的&lt;/strong&gt;&lt;/span&gt;。&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;因为其帧格式和以太网一样&lt;/strong&gt;&lt;/span&gt;，所以依然称&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;交换机组成的网络为以太网&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;（3）以太网的最短帧与带宽和链路长度有关。&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;100M以太网&lt;/strong&gt;&lt;/span&gt;比10M以太网速率提高10位，要想和10M以太网兼容，就要确保最短帧也是64字节，那就将电缆最大长度由1000m降到&lt;span style=&#34;color:#0000ff;&#34;&gt;&lt;strong&gt;100m&lt;/strong&gt;&lt;/span&gt;，因此以太网的争用期依然是51.2μs，最短帧依然是64字节。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2. 吉比特以太网&lt;/strong&gt;&lt;/p&gt;&lt;p align=&#34;center&#34;&gt;吉比特以太网（1000M）标准&lt;/p&gt;&lt;div align=&#34;center&#34;&gt;&lt;div class=&#34;table-box&#34;&gt;&lt;table border=&#34;1&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;名称&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;传输介质&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;网段最大长度&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;center&#34;&gt;特点&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;1000BASE-SX&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;550m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;多模光纤（10和62.5μm）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;1000BASE-LX&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;5000m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;单模光纤（10μm）、多模光纤（50和62.5μm）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;1000BASE-CX&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜线&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;25m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;使用两对屏蔽双绞线电缆STP&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;95&#34;&gt;&lt;p align=&#34;center&#34;&gt;1000BASE-T&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜线&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;130&#34;&gt;&lt;p align=&#34;center&#34;&gt;100m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;360&#34;&gt;&lt;p align=&#34;left&#34;&gt;使用四对UTP5类线&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;（1）吉比特（1000M）以太网的特点&lt;/p&gt;&lt;p&gt;　　①允许在1Gb/s下&lt;span style=&#34;color:#0000ff;&#34;&gt;&lt;strong&gt;全双工和半双工&lt;/strong&gt;&lt;/span&gt;两种方式下工作。&lt;/p&gt;&lt;p&gt;　　②使用IEEE802.3协议规定的帧格式&lt;/p&gt;&lt;p&gt;　　③在&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;半双工方式下使用CSMA/CD协议&lt;/strong&gt;（&lt;strong&gt;全双工方式不需要使用CSMA/CD协议&lt;/strong&gt;）&lt;/span&gt;&lt;/p&gt;&lt;p&gt;　　④与10BASE-T和100BASE-T技术向后兼容。&lt;/p&gt;&lt;p&gt;（2）“载波延伸”&lt;/p&gt;&lt;p align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBw2J1.png&#34; alt=&#34;&#34; height=&#34;235&#34; width=&#34;658&#34;&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;　　①吉比特以太网工作&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;在半双工时&lt;/strong&gt;&lt;/span&gt;，就必须进行碰撞检测。数据速率提高了，要想和10M以太网兼容，就要确保最短帧也是64字节，这只能减少最大电缆长度，&lt;span style=&#34;color:#0000ff;&#34;&gt;&lt;strong&gt;以太网最大电缆就要缩短到10m&lt;/strong&gt;&lt;/span&gt;，短到几乎没有实用价值。&lt;/p&gt;&lt;p&gt;　　②吉比特以太网&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;为了增加最大传输距离&lt;/strong&gt;，&lt;strong&gt;将最短帧由64字节增加到512字节&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;　　③如果数据帧不超过512字节，则在&lt;span style=&#34;color:#ff00ff;&#34;&gt;&lt;strong&gt;FCS域后面添加“载波延伸”域&lt;/strong&gt;&lt;/span&gt;，当主机发送完短数据帧后，继续发送载波延伸信号，冲突信号传回来时，发送端就能感知到了。&lt;/p&gt;&lt;p&gt;（3）分组突发&lt;/p&gt;&lt;p align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tBw4sO.png&#34; alt=&#34;&#34; height=&#34;251&#34; width=&#34;756&#34;&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;　　①如果发送的数据帧都是小于64字节的&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;短报文&lt;/strong&gt;&lt;/span&gt;时，那么&lt;span style=&#34;color:#ff00ff;&#34;&gt;&lt;strong&gt;链路的利用率就会很低&lt;/strong&gt;&lt;/span&gt;，因为“载波延伸”域占用了大量的带宽。于是，千兆以太网引入了“分组突发”机制来改善这个问题。&lt;/p&gt;&lt;p&gt;　　②当很多短帧要发送时，&lt;span style=&#34;color:#ff0000;&#34;&gt;&lt;strong&gt;第一个短帧采用“载波延伸”方法进行填充&lt;/strong&gt;&lt;/span&gt;，&lt;strong&gt;&lt;span style=&#34;color:#0000ff;&#34;&gt;后面的一些短帧可以一个接一个发送&lt;/span&gt;，&lt;span style=&#34;color:#ff0000;&#34;&gt;它们之间只要留必要的帧间最小间隔即可&lt;/span&gt;&lt;/strong&gt;。这样就形成一串分组突发，直到达到1500字节或稍多一些为止。从而提高链路的利用率。&lt;/p&gt;&lt;p&gt;　　③“载波延伸”和“分组突发”&lt;span style=&#34;color:#0000ff;&#34;&gt;&lt;strong&gt;仅用于千兆以太网的半双工模式&lt;/strong&gt;&lt;/span&gt;；而全双工模式不需要使用CSMA/CD协议，也就不需要这两个特性。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;3. 10吉比特以太网&lt;/strong&gt;&lt;/p&gt;&lt;p align=&#34;center&#34;&gt;万兆以太网标准&lt;/p&gt;&lt;div align=&#34;center&#34;&gt;&lt;div class=&#34;table-box&#34;&gt;&lt;table border=&#34;1&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p align=&#34;center&#34;&gt;名称&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;传输介质&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;网段最大长度&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;center&#34;&gt;特点&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p align=&#34;center&#34;&gt;10GBASE-SR&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;300m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;left&#34;&gt;多模光纤（0.85μm）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p align=&#34;center&#34;&gt;10GBASE-LR&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;10km&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;left&#34;&gt;单模光纤（1.3μm）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p align=&#34;center&#34;&gt;10GBASE-ER&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;光缆&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;40m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;left&#34;&gt;单模光纤（1.3μm）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p&gt;10GBASE-CX4&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜线&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;15m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;left&#34;&gt;使用四对双芯同轴电缆&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&#34;top&#34; width=&#34;101&#34;&gt;&lt;p align=&#34;center&#34;&gt;10GBASE-T&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;81&#34;&gt;&lt;p align=&#34;center&#34;&gt;铜线&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;129&#34;&gt;&lt;p align=&#34;center&#34;&gt;100m&lt;/p&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; width=&#34;220&#34;&gt;&lt;p align=&#34;left&#34;&gt;使用4对6A类的UTP双绞线&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;（1）10GE的帧格式与10Mb/s、100Mb/s和1Gb/s以太网的帧格式完全相同。10GE还保留了802.3标准规定的了以太网最小和最长帧长。&lt;/p&gt;&lt;p&gt;（2）由于数据率很高，10GE不再使用铜线而只使用光纤作为传输媒体。它使用长距离（40km）的光收发器与单模光纤接口，以便能够工作在广域网和城域网的范围。&lt;/p&gt;&lt;p&gt;（3）10GE只工作在全双工模式，因此不存在争用问题，也不使用CSMA/CD协议。这就使用10GE的传输距离不再受碰撞检测的限制而大大提高了&lt;/p&gt;&lt;/div&gt;                                    &lt;/div&gt;">👾计算机网络学习笔记（三）--  数据链路层</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/"" data-c="
          &lt;p&gt;😉&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/&#34;&gt;计算机网络学习笔记（一）--  计算机网络概述&lt;/a&gt;&lt;br&gt;
😉&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/&#34;&gt;计算机网络学习笔记（三）--  数据链路层&lt;/a&gt;&lt;br&gt;
😉&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/&#34;&gt;计算机网络学习笔记（四）--  网络层&lt;/a&gt;&lt;br&gt;
😉&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/&#34;&gt;计算机网络学习笔记（五）--  运输层&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-物理层特性&#34;&gt;1. 物理层特性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;机械特性&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;电气特性&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;功能特性&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;规程特性&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;
&lt;h3 id=&#34;2-数据通信基础知识&#34;&gt;2. 数据通信基础知识&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;数据通信系统模型&#34;&gt;数据通信系统模型&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;数据通信系统三部分：&lt;strong&gt;源系统(发送端)、传输系统、目的系统(接收端)&lt;/strong&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twjDlq.png&#34; alt=&#34;twjDlq.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;模拟信号&lt;/strong&gt;：连续信号，表示消息的参数取值是连续的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;数字信号&lt;/strong&gt;：离散信号，表示消息的参数取值是离散的。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;信道&#34;&gt;信道&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;按照通信双方信息交互的方式分为：&lt;strong&gt;单工通信&lt;/strong&gt;、&lt;strong&gt;半双工通信&lt;/strong&gt;、&lt;strong&gt;全双工通信&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;曼切斯特编码产生的信号频率比不归零制高。不归零制没有自同步能力，曼切斯特编码具有自同步能力。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;基带信号：来自信源的信号.计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。包含有较多低频成分，需要进行调制。&lt;br&gt;
调制分为：
&lt;ul&gt;
&lt;li&gt;基带调制：对基带信号波形进行变换，仍然是基带信号&lt;/li&gt;
&lt;li&gt;带通调制：经过载波进行调制，把基带信号的频率范围搬移到较高的频段以便在信道中传输。经过载波调制后的信号称为带通信号。基本的带通调制方法有：&lt;/li&gt;
&lt;li&gt;调幅AM：载波的振幅随基带数字信号而变化。&lt;/li&gt;
&lt;li&gt;调频FM：载波的频率随基带数字信号而变化。&lt;/li&gt;
&lt;li&gt;调相PM：载波的初始相位随基带数字信号而变化。&lt;/li&gt;
&lt;li&gt;正交振幅调制QAM：多元制的振幅相位混合调制方法，信息传输速率更高。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;调制解调原因&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;无线电通信系统：通过空间辐射方式传送信号。&lt;br&gt;
电磁波理论可知：天线尺寸为被辐射信号波长的十分之一或更大些，信号才能有效的被辐射。&lt;br&gt;
对于语音信号：天线尺寸需要在几十公里以上，因此需要调制(语音信号的频率范围为300~3400Hz)。&lt;br&gt;
调制过程：将信号频谱搬移到任何所需的较高频率范围，这就容易以电磁波形式辐射出去。&lt;br&gt;
如果不进行调制，而是把被传送的信号直接辐射出去，那么各电台所发出的信号频率就会相同，他们混在一起，收信者将无法选择所要接收的信号。&lt;br&gt;
调制作用的实质：把各种信号的频谱搬移，使它们互不重叠地占据不同的频率范围，即信号分别托付于不同频率的载波上，接收机可以分离出所需要的频率的信号，不致相互干扰。（实现了多路复用）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;信道极限容量&#34;&gt;信道极限容量&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;码元传输的速率越高，或者信号传输的距离越远，或噪声干扰越大，或传输媒体质量越差，在接收端的波形失真就越严重。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;限制码元在信道上的传输速率的因素有：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;信道能够通过的频率范围&lt;br&gt;
奈氏准则：在任何信道中，码元传输的速率是由上限的，传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的判决成为不可能。&lt;/li&gt;
&lt;li&gt;信噪比：信号的平均功率和噪声的平均功率之比(S/N)单位dB&lt;br&gt;
信噪比(dB)=10log10(S/N)(dB)&lt;br&gt;
信道的极限信息传输速率C=Wlog2(1+S/N) (b/s)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;可以看出：&lt;strong&gt;信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;提高信息的传输速率：尽可能的让每一个码元携带更多信息量。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-物理层下的传输媒体&#34;&gt;3. 物理层下的传输媒体&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;导向传输媒体：固体媒体(铜线或光纤)。双绞线、同轴电缆、光纤。&lt;/li&gt;
&lt;li&gt;非导向传输媒体：指利用无线电波在自由空间传播。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-信道复用技术&#34;&gt;4. 信道复用技术&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;频分-时分-统计时分复用&#34;&gt;频分、时分、统计时分复用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;频分复用&lt;/strong&gt;FDM：所有用户在同样的时间占用不同的带宽资源。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0FCDA.png&#34; alt=&#34;t0FCDA.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;时分复用&lt;/strong&gt;TDM：所有用户在不同的时间占用同样的频带宽度。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0Fegg.png&#34; alt=&#34;t0Fegg.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;TDM有时会造成信道利用率不高：&lt;/p&gt;
  &lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0eoin.png&#34; alt=&#34;t0eoin.png&#34; border=&#34;0&#34; /&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;统计时分复用&lt;/strong&gt;STDM：TDM的改进，提高信道利用率。&lt;/p&gt;
  &lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0e2M8.png&#34; alt=&#34;t0e2M8.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;波分复用&#34;&gt;波分复用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;波分复用&lt;/strong&gt;WDM：即光的频分复用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
  &lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0FUKJ.png&#34; alt=&#34;t0FUKJ.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
&lt;p&gt;经过复用器合波后，速率达到8 x 2.5Gbit/s = 20Gbit/s。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;h4 id=&#34;码分复用&#34;&gt;码分复用&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;码分复用&lt;/strong&gt;CDM：即&lt;strong&gt;码分多址CDMA&lt;/strong&gt;，每一个用户可以在同样的时间使用同样的频带进行通信。&lt;/p&gt;
&lt;p&gt;为每个用户分配 m bit 的码片，并且所有的码片&lt;strong&gt;正交&lt;/strong&gt;，对于任意两个码片 &lt;em&gt;S&lt;/em&gt; (S站的码片向量) 和 &lt;em&gt;T&lt;/em&gt; (T站的码片向量) 有&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0k1Ld.png&#34; alt=&#34;t0k1Ld.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;为了方便，取 m=8，设码片 &lt;em&gt;S&lt;/em&gt; 为 00011011。在拥有该码片的用户&lt;strong&gt;发送比特 1 时就发送该码片，发送比特 0 时就发送该码片的反码&lt;/strong&gt; 11100100。&lt;/p&gt;
&lt;p&gt;在计算时将 00011011 记作 (-1 -1 -1 +1 +1 -1 +1 +1)，可以得到&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0kUW8.png&#34; alt=&#34;t0kUW8.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/t0k0yQ.png&#34; alt=&#34;t0k0yQ.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;其中 &lt;em&gt;S&lt;/em&gt;&#39; 为 &lt;em&gt;S&lt;/em&gt; 的反码。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;任何一个码片向量和该码片向量自己的规格化内积都是1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;利用上面的式子我们知道，当接收端使用码片 &lt;em&gt;S&lt;/em&gt; 对接收到的数据进行内积运算时，&lt;strong&gt;结果为 0 的是其它用户发送的数据，结果为 1 的是用户发送的比特 1，结果为 -1 的是用户发送的比特 0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;码分复用需要发送的数据量为原先的 m 倍。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-宽带接入技术&#34;&gt;5. 宽带接入技术&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;xdsl技术用数字技术对现有的模拟电话用户线进行改造使它能够承载宽带业务&#34;&gt;xDSL技术：用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。&lt;/h4&gt;
&lt;p&gt;其中，0-4kHz低端频谱留给传统电话使用，高端频谱留给用户上网使用。几种类型:ADSL/HDSL/SDSL/VDSL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ADSL技术：非对称数字用户线。ADSL把上行和下行带宽做成不对称的。上行指从用户到ISP,下行指从ISP到用户。用户线两端是调制解调器(DMT).&lt;br&gt;
DMT调制技术采用频分复用。40kHz-1.1MHz的高端频谱划分许多子信道，25个用于上行，249个用于下行。每个信道占据4kHz带宽。ADSL不能保证固定的数据率。&lt;/li&gt;
&lt;li&gt;基于ADSL的接入网组成：
&lt;ul&gt;
&lt;li&gt;数字用户线接入复用器DSLAM（包含许多ADSL调制解调器，记为ATU-C和ATU-R）&lt;/li&gt;
&lt;li&gt;用户线&lt;/li&gt;
&lt;li&gt;用户家的设施&lt;/li&gt;
&lt;li&gt;总结：ADSL是借助于在用户线两端安装ADSL调制解调器(即ATU-R和ATU-C)对数字信号进行调制，使得调制后的数字信号的频谱适合在原来的用线上传输。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;光纤同轴混合网(HFC网)&lt;br&gt;
HFC网是目前覆盖面很广的有线电视网CATV的基础上开发的一种居民带宽接入网。
&lt;ul&gt;
&lt;li&gt;功能：传送CATV、电话业务、数据和其他宽带交互型业务。&lt;/li&gt;
&lt;li&gt;特点：
&lt;ol&gt;
&lt;li&gt;HFC网的主干线路采用光纤&lt;/li&gt;
&lt;li&gt;HFC网采用结点体系结构：从头端到各个光纤结点用模拟光纤连接，构成星型网。&lt;/li&gt;
&lt;li&gt;HFC网具有比CATV网更宽的频谱，且具有双向传输功能&lt;/li&gt;
&lt;li&gt;每个家庭要安装一个用户接口盒，其提供三种连接：使用同轴电缆连接到机顶盒再连接到用户的电视机；使用双绞线连接到用户的电话机；使用电缆调制解调器连接到用户的计算机。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;fttx技术光纤到&#34;&gt;FTTx技术（光纤到…）&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;光纤到户FTTH：即将光纤一直铺设到用户家庭。&lt;/li&gt;
&lt;li&gt;光纤到大楼FTTB：支持大中型企业、大公司高速率宽带业务需求，比FTTH经济。&lt;/li&gt;
&lt;li&gt;光纤到路边FTTC：比较流行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
">☠️计算机网络学习笔记（二）--  物理层</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-yi/"" data-c="
          &lt;p&gt;👻&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-er/&#34;&gt;计算机网络学习笔记（二）--  物理层&lt;/a&gt;&lt;br&gt;
👻&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-san-shu-ju-lian-lu-ceng/&#34;&gt;计算机网络学习笔记（三）--  数据链路层&lt;/a&gt;&lt;br&gt;
👻&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-si-wang-luo-ceng/&#34;&gt;计算机网络学习笔记（四）--  网络层&lt;/a&gt;&lt;br&gt;
👻&lt;a href=&#34;https://keasar.com.cn/post/ji-suan-ji-wang-luo-xue-xi-bi-ji-wu-yun-shu-ceng/&#34;&gt;计算机网络学习笔记（五）--  运输层&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-互联网概述&#34;&gt;1. 互联网概述&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;计算机网络由若干&lt;strong&gt;结点&lt;/strong&gt;和连接这些结点的&lt;strong&gt;链路&lt;/strong&gt;组成。计算机、集线器、交换机、路由器都可以是结点。&lt;/li&gt;
&lt;li&gt;网络与网络之间通过&lt;strong&gt;路由器&lt;/strong&gt;连接成互联网。&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tw57ge.png&#34; alt=&#34;tw57ge.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;2-isp&#34;&gt;2. ISP&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;互联网服务提供商 &lt;strong&gt;ISP&lt;/strong&gt; 可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等联网设备，个人或机构向 ISP 缴纳一定的费用就可以接入互联网。&lt;/li&gt;
&lt;li&gt;目前的互联网是一种多层次 ISP 结构，ISP 根据覆盖面积的大小分为主干 ISP、地区 ISP 和本地 ISP。&lt;/li&gt;
&lt;li&gt;互联网交换点 &lt;strong&gt;IXP&lt;/strong&gt; 允许两个 ISP 直接相连而不用经过第三个 ISP。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tw5qud.png&#34; alt=&#34;tw5qud.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;3-互联网的组成&#34;&gt;3. 互联网的组成&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;两大块&#34;&gt;两大块&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;边缘部分：所有连接在互联网上的&lt;strong&gt;主机&lt;/strong&gt;（又被称为端系统），用户可以直接使用。用来进行通信和资源共享等。&lt;/li&gt;
&lt;li&gt;核心部分：由大量的网络和连接这些网络的&lt;strong&gt;路由器&lt;/strong&gt;组成，用来为边缘部分的主机提供服务。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twIkbn.png&#34; alt=&#34;twIkbn.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;h4 id=&#34;主机间的通信方式&#34;&gt;主机间的通信方式&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;客户-服务器方式（C/S）：客户即是服务请求方，服务器是服务提供方。&lt;/li&gt;
&lt;li&gt;对等连接方式（P2P）：不区分客户和服务器。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;互联网核心部分&#34;&gt;互联网核心部分&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;路由器在核心部分起到特殊作用，任务是转发收到的分组，完成分组交换。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;电路交换&#34;&gt;电路交换&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;交换过程必须经过建立连接（占用信道资源）--  通话（一直占用信道资源）--  释放连接（归还通信资源）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在整个通信过程中通话的两个用户始终占用端到端的通信资源。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;报文交换&#34;&gt;报文交换&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;报文交换用于邮局通信系统，邮局接收到一份报文之后，先存储下来，然后把相同目的地的报文一起转发到下一个目的地，这个过程就是存储转发过程。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;分组交换&#34;&gt;分组交换&lt;/h4&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;分组交换使用了存储转发，但是转发的是分组而不是报文。把整块数据称为一个报文，由于一个报文可能很长，需要先进行切分，来满足分组能处理的大小。在每个切分的数据前面加上首部之后就成为了分组，首部包含了&lt;strong&gt;目的地址&lt;/strong&gt;和&lt;strong&gt;源地址&lt;/strong&gt;等控制信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twIn8U.png&#34; alt=&#34;twIn8U.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;4-时延&#34;&gt;4. 时延&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h4 id=&#34;发送时延&#34;&gt;发送时延&lt;/h4&gt;
&lt;p&gt;主机或路由器发送数据帧所需要的时间。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twomdI.png&#34; alt=&#34;twomdI.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;其中 l 表示数据帧的长度，v 表示发送速率。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;传播时延&#34;&gt;传播时延&lt;/h4&gt;
&lt;p&gt;电磁波在信道中传播一定的距离需要花费的时间，电磁波传播速度接近光速。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twTkt0.png&#34; alt=&#34;twTkt0.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;其中 l 表示信道长度，v 表示电磁波在信道上的传播速率。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;处理时延&#34;&gt;处理时延&lt;/h4&gt;
&lt;p&gt;主机或路由器收到分组时进行处理所需要的时间，例如分析首部，从分组中提取数据部分等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;排队时延&#34;&gt;排队时延&lt;/h4&gt;
&lt;p&gt;分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量。&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twT6gS.png&#34; alt=&#34;twT6gS.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h4 id=&#34;时延带宽积&#34;&gt;时延带宽积&lt;/h4&gt;
&lt;p&gt;时延带宽积 = 传播时延 x 带宽&lt;/p&gt;
&lt;p&gt;链路的时延带宽积被称为以比特为单位的链路长度。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-计算机网络体系结构&#34;&gt;5. 计算机网络体系结构&lt;/h3&gt;
&lt;p&gt;​															&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/tw7hse.png&#34; alt=&#34;tw7hse.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;应用层&lt;/strong&gt;：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等。&lt;strong&gt;数据单位为报文&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;运输层&lt;/strong&gt;：提供的是进程间的通用数据传输服务。由于应用层协议很多，定义通用的运输层协议就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 &lt;strong&gt;TCP，提供面向连接、可靠的数据传输服务&lt;/strong&gt;，&lt;strong&gt;数据单位为报文段&lt;/strong&gt;；用户数据报协议 &lt;strong&gt;UDP，提供无连接、尽最大努力的数据传输服务&lt;/strong&gt;，&lt;strong&gt;数据单位为用户数据报&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;网络层&lt;/strong&gt;：为主机之间提供服务，而不是像运输层协议那样是为主机中的进程提供服务。网络层把运输层产生的报文段或者用户数据报封装成**分组(IP数据报)**来进行传输。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;数据链路层&lt;/strong&gt;：网络层针对的还是主机之间，而主机之间可以有很多链路，链路层协议就是为相邻结点之间提供服务。数据链路层把网络层传来的分组&lt;strong&gt;封装成帧&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;物理层&lt;/strong&gt;：考虑的是怎样在传输媒体上传输数据&lt;strong&gt;比特流&lt;/strong&gt;，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使物理层上的数据链路层感觉不到这些差异。&lt;/p&gt;
&lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twbV9P.png&#34; alt=&#34;twbV9P.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;TCP/IP体系结构&lt;/p&gt;
&lt;p&gt;现在的 TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twXlrT.png&#34; alt=&#34;twXlrT.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
&lt;p&gt;TCP/IP 协议族是一种沙漏形状，中间小两边大，IP 协议在其中占用举足轻重的地位。&lt;/p&gt;
  &lt;div align=&#34;center&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/06/04/twqzee.png&#34; alt=&#34;twqzee.png&#34; border=&#34;0&#34; /&gt;&lt;/div&gt;
">💀计算机网络学习笔记（一）--  计算机网络概述</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/centos76-an-zhuang-docker-bing-zai-docker-zhong-li-yong-tomcat-bu-shu-jing-tai-wang-ye/"" data-c="
          &lt;h3 id=&#34;centos76安装docker并在docker中利用tomcat部署静态网页&#34;&gt;CentOS7.6安装Docker并在Docker中利用Tomcat部署静态网页&lt;/h3&gt;
&lt;!-- more --&gt;
&lt;h4 id=&#34;1-安装docker&#34;&gt;1. 安装Docker&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;更新yum包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum update
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看是否安装过docker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;whereis docker
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果安装过，则删除之前的版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum remove docker docker-common docker-selinux docker-engine
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置yum源&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看docker版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum list docker-ce --showduplicates | sort -r
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install docker-ce 
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;启动Docker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl start docker
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;开机启动&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl enable docker
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;验证安装是否成功&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker version
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;如下存在Client和Server则成功&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;X:%5Cclassworks%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%5Cdockerversion.png&#34; alt=&#34;dockerversion&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2.Docker常用命令&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker 运行容器命令
docker ps
 
docker 所有容器命令
docker ps -a
 
docker 删除容器命令
docker rm 容器id
 
docker 镜像查看命令
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.利用Tomcat部署静态网页&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;拉取Tomcat&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker pull tomcat
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;启动容器，验证Tomcat服务&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run -p 8080:8080 tomcat
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;访问&lt;/p&gt;
&lt;p&gt;服务器外网IP:8080即可&lt;/p&gt;
&lt;p&gt;如果不行，看是否能ping通或者是服务器端口是否开放&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将静态页面拷贝到docker中tomcat的webapps下，建议挂载&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;将Tomcat启动，进入docker中查看命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker exec -it 容器id /bin/bash //容器ID可通过 docker ps命令查询
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;挂载静态文件&lt;/p&gt;
&lt;p&gt;首先将静态资源文件夹上传至云服务器，例如我的上传至了/root下，即SongMove文件夹。下面这条命令即是将静态资源目录映射到容器的/ROOT下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run -d -v /root/SongMove/:/usr/local/tomcat/webapps/ROOT/ -p 8080:8080 tomcat:latest
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;4.服务器IP:8080访问即可&lt;/p&gt;
">CentOS7.6安装Docker并在Docker中利用Tomcat部署静态网页</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/han-shu-shang/"" data-c="
          &lt;h2 id=&#34;函数的概念&#34;&gt;函数的概念&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;对于 js 来说，函数就是把任意一段代码放在一个 &lt;strong&gt;盒子&lt;/strong&gt; 里面&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在我想要让这段代码执行的时候，直接执行这个 &lt;strong&gt;盒子&lt;/strong&gt; 里面的代码就行&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;先看一段代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 这个是我们以前写的一段代码
for (var i = 0; i &amp;lt; 10; i++) {
  console.log(i)
}

// 函数，这个 {} 就是那个 “盒子”
function fn() {
  // 这个函数我们以前写的代码
  for (var i = 0; i &amp;lt; 10; i++) {
    console.log(i)
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;函数的两个阶段重点&#34;&gt;函数的两个阶段（重点）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;按照我们刚才的说法，两个阶段就是 &lt;strong&gt;放在盒子里面&lt;/strong&gt; 和 &lt;strong&gt;让盒子里面的代码执行&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;函数定义阶段&#34;&gt;函数定义阶段&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;定义阶段就是我们把代码 &lt;strong&gt;放在盒子里面&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;我们就要学习怎么 &lt;strong&gt;放进去&lt;/strong&gt;，也就是书写一个函数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;我们有两种定义方式 &lt;strong&gt;声明式&lt;/strong&gt; 和 &lt;strong&gt;赋值式&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;声明式&#34;&gt;声明式&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;使用 &lt;code&gt;function&lt;/code&gt; 这个关键字来声明一个函数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;语法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn() {
  // 一段代码
}
// function: 声明函数的关键字，表示接下来是一个函数了
// fn: 函数的名字，我们自己定义的（遵循变量名的命名规则和命名规范）
// (): 必须写，是用来放参数的位置（一会我们再聊）
// {}: 就是我们用来放一段代码的位置（也就是我们刚才说的 “盒子”）
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;赋值式&#34;&gt;赋值式&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;其实就是和我们使用 &lt;code&gt;var&lt;/code&gt; 关键字是一个道理了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;首先使用 &lt;code&gt;var&lt;/code&gt; 定义一个变量，把一个函数当作值直接赋值给这个变量就可以了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;语法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;var fn = function () {
  // 一段代码
}
// 不需要在 function 后面书写函数的名字了，因为在前面已经有了
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;函数调用阶段&#34;&gt;函数调用阶段&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;就是让 &lt;strong&gt;盒子里面&lt;/strong&gt; 的代码执行一下&lt;/li&gt;
&lt;li&gt;让函数执行&lt;/li&gt;
&lt;li&gt;两种定义函数的方式不同，但是调用函数的方式都以一样的&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;调用一个函数&#34;&gt;调用一个函数&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;函数调用就是直接写 &lt;code&gt;函数名()&lt;/code&gt; 就可以了&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 声明式函数
function fn() {
  console.log(&#39;我是 fn 函数&#39;)
}

// 调用函数
fn()

// 赋值式函数
var fn2 = function () {
  console.log(&#39;我是 fn2 函数&#39;)
}

// 调用函数
fn()
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;注意： &lt;strong&gt;定义完一个函数以后，如果没有函数调用，那么写在 {} 里面的代码没有意义，只有调用以后才会执行&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;调用上的区别&#34;&gt;调用上的区别&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;虽然两种定义方式的调用都是一样的，但是还是有一些区别的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;声明式函数： 调用可以在 &lt;strong&gt;定义之前或者定义之后&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 可以调用
fn()

// 声明式函数
function fn() {
  console.log(&#39;我是 fn 函数&#39;)
}

// 可以调用
fn()
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;赋值式函数： 调用只能在 &lt;strong&gt;定义之前&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 会报错
fn()

// 赋值式函数
var fn = function () {
  console.log(&#39;我是 fn 函数&#39;)
}

// 可以调用
fn()
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;函数的参数重点&#34;&gt;函数的参数（重点）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;我们在定义函数和调用函数的时候都出现过 &lt;code&gt;()&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;现在我们就来说一下这个 &lt;code&gt;()&lt;/code&gt; 的作用&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;就是用来放参数的位置&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;参数分为两种 &lt;strong&gt;行参&lt;/strong&gt; 和 &lt;strong&gt;实参&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 声明式
function fn(行参写在这里) {
  // 一段代码
}

fn(实参写在这里)

// 赋值式函数
var fn = function (行参写在这里) {
  // 一段代码
}
fn(实参写在这里)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;行参和实参的作用&#34;&gt;行参和实参的作用&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;行参&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;就是在函数内部可以使用的变量，在函数外部不能使用&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;每写一个单词，就相当于在函数内部定义了一个可以使用的变量（遵循变量名的命名规则和命名规范）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多个单词之间以 &lt;code&gt;,&lt;/code&gt; 分隔&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 书写一个参数
function fn(num) {
  // 在函数内部就可以使用 num 这个变量
}

var fn1 = function (num) {
	// 在函数内部就可以使用 num 这个变量
}

// 书写两个参数
function fun(num1, num2) {
  // 在函数内部就可以使用 num1 和 num2 这两个变量
}

var fun1 = function (num1, num2) {
  // 在函数内部就可以使用 num1 和 num2 这两个变量
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果只有行参的话，那么在函数内部使用的值个变量是没有值的，也就是 &lt;code&gt;undefined&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;行参的值是在函数调用的时候由实参决定的&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;实参&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在函数调用的时候给行参赋值的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;也就是说，在调用的时候是给一个实际的内容的&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn(num) {
  // 函数内部可以使用 num 
}

// 这个函数的本次调用，书写的实参是 100
// 那么本次调用的时候函数内部的 num 就是 100
fn(100) 

// 这个函数的本次调用，书写的实参是 200
// 那么本次调用的时候函数内部的 num 就是 200
fn(200)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;函数内部的行参的值，由函数调用的时候传递的实参决定&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;多个参数的时候，是按照顺序一一对应的&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn(num1, num2) {
  // 函数内部可以使用 num1 和 num2
}

// 函数本次调用的时候，书写的参数是 100 和 200
// 那么本次调用的时候，函数内部的 num1 就是 100，num2 就是 200
fn(100, 200)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;参数个数的关系&#34;&gt;参数个数的关系&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;行参比实参少&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;因为是按照顺序一一对应的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;行参少就会拿不到实参给的值，所以在函数内部就没有办法用到这个值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn(num1, num2) {
  // 函数内部可以使用 num1 和 num2
}

// 本次调用的时候，传递了两个实参，100 200 和 300
// 100 对应了 num1，200 对应了 num2，300 没有对应的变量
// 所以在函数内部就没有办法依靠变量来使用 300 这个值
fn(100, 200, 300)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;行参比实参多&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;因为是按照顺序一一对应的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;所以多出来的行参就是没有值的，就是 &lt;code&gt;undefined&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn(num1, num2, num3) {
  // 函数内部可以使用 num1 num2 和 num3
}

// 本次调用的时候，传递了两个实参，100 和 200
// 就分别对应了 num1 和 num2
// 而 num3 没有实参和其对应，那么 num3 的值就是 undefined
fn(100, 200)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;函数的return重点&#34;&gt;函数的return（重点）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;return 返回的意思，其实就是给函数一个 &lt;strong&gt;返回值&lt;/strong&gt; 和 &lt;strong&gt;终断函数&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;终断函数&#34;&gt;终断函数&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;当我开始执行函数以后，函数内部的代码就会从上到下的依次执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;必须要等到函数内的代码执行完毕&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;而 &lt;code&gt;return&lt;/code&gt; 关键字就是可以在函数中间的位置停掉，让后面的代码不在继续执行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn() {
  console.log(1)
  console.log(2)
  console.log(3)
  
  // 写了 return 以后，后面的 4 和 5 就不会继续执行了
  return
  console.log(4)
  console.log(5)
}

// 函数调用
fn()
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;返回值&#34;&gt;返回值&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;函数调用本身也是一个表达式，表达式就应该有一个值出现&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;现在的函数执行完毕之后，是不会有结果出现的&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;// 比如 1 + 2 是一个表达式，那么 这个表达式的结果就是 3
console.log(1 + 2) // 3

function fn() {
  // 执行代码
}

// fn() 也是一个表达式，这个表达式就没有结果出现
console.log(fn()) // undefined
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;return&lt;/code&gt; 关键字就是可以给函数执行完毕一个结果&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn() {
  // 执行代码
  return 100
}

// 此时，fn() 这个表达式执行完毕之后就有结果出现了
console.log(fn()) // 100
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;我们可以在函数内部使用 &lt;code&gt;return&lt;/code&gt; 关键把任何内容当作这个函数运行后的结果&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;函数的优点&#34;&gt;函数的优点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;函数就是对一段代码的封装，在我们想调用的时候调用&lt;/li&gt;
&lt;li&gt;函数的几个优点
&lt;ol&gt;
&lt;li&gt;封装代码，使代码更加简洁&lt;/li&gt;
&lt;li&gt;复用，在重复功能的时候直接调用就好&lt;/li&gt;
&lt;li&gt;代码执行时机，随时可以在我们想要执行的时候执行&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;预解析重点&#34;&gt;预解析（重点）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;预解析&lt;/strong&gt; 其实就是聊聊 js 代码的编译和执行&lt;/li&gt;
&lt;li&gt;js 是一个解释型语言，就是在代码执行之前，先对代码进行通读和解释，然后在执行代码&lt;/li&gt;
&lt;li&gt;也就是说，我们的 js 代码在运行的时候，会经历两个环节 &lt;strong&gt;解释代码&lt;/strong&gt; 和 &lt;strong&gt;执行代码&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;解释代码&#34;&gt;解释代码&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;因为是在所有代码执行之前进行解释，所以叫做 &lt;strong&gt;预解析（预解释）&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要解释的内容有两个&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;声明式函数
&lt;ul&gt;
&lt;li&gt;在内存中先声明有一个变量名是函数名，并且这个名字代表的内容是一个函数&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;var&lt;/code&gt; 关键字
&lt;ul&gt;
&lt;li&gt;在内存中先声明有一个变量名&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;看下面一段代码&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;fn()
console.log(num)

function fn() {
  console.log(&#39;我是 fn 函数&#39;)
}

var num = 100
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;经过预解析之后可以变形为&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function fn() {
  console.log(&#39;我是 fn 函数&#39;)
}
var num

fn()
console.log(num)
num = 100
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;赋值是函数会按照 &lt;code&gt;var&lt;/code&gt; 关键字的规则进行预解析&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
">函数（上）</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;欢迎来到我的小站呀，很高兴遇见你！🤝&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;关于本站&#34;&gt;🏠 关于本站&lt;/h2&gt;
&lt;h2 id=&#34;博主是谁&#34;&gt;👨‍💻 博主是谁&lt;/h2&gt;
&lt;h2 id=&#34;兴趣爱好&#34;&gt;⛹ 兴趣爱好&lt;/h2&gt;
&lt;h2 id=&#34;联系我呀&#34;&gt;📬 联系我呀&lt;/h2&gt;
">关于</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://qzlu-cyber.github.io/Keasar_Blog/post/hello-gridea/"" data-c="
          &lt;p&gt;👏  欢迎使用 &lt;strong&gt;Gridea&lt;/strong&gt; ！&lt;br&gt;
✍️  &lt;strong&gt;Gridea&lt;/strong&gt; 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/getgridea/gridea&#34;&gt;Github&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://gridea.dev/&#34;&gt;Gridea 主页&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://fehey.com/&#34;&gt;示例网站&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;特性&#34;&gt;特性👇&lt;/h2&gt;
&lt;p&gt;📝  你可以使用最酷的 &lt;strong&gt;Markdown&lt;/strong&gt; 语法，进行快速创作&lt;/p&gt;
&lt;p&gt;🌉  你可以给文章配上精美的封面图和在文章任意位置插入图片&lt;/p&gt;
&lt;p&gt;🏷️  你可以对文章进行标签分组&lt;/p&gt;
&lt;p&gt;📋  你可以自定义菜单，甚至可以创建外部链接菜单&lt;/p&gt;
&lt;p&gt;💻  你可以在 &lt;strong&gt;Windows&lt;/strong&gt;，&lt;strong&gt;MacOS&lt;/strong&gt; 或 &lt;strong&gt;Linux&lt;/strong&gt; 设备上使用此客户端&lt;/p&gt;
&lt;p&gt;🌎  你可以使用 &lt;strong&gt;𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌&lt;/strong&gt; 或 &lt;strong&gt;Coding Pages&lt;/strong&gt; 向世界展示，未来将支持更多平台&lt;/p&gt;
&lt;p&gt;💬  你可以进行简单的配置，接入 &lt;a href=&#34;https://github.com/gitalk/gitalk&#34;&gt;Gitalk&lt;/a&gt; 或 &lt;a href=&#34;https://github.com/SukkaW/DisqusJS&#34;&gt;DisqusJS&lt;/a&gt; 评论系统&lt;/p&gt;
&lt;p&gt;🇬🇧  你可以使用&lt;strong&gt;中文简体&lt;/strong&gt;或&lt;strong&gt;英语&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;🌁  你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力&lt;/p&gt;
&lt;p&gt;🖥  你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步&lt;/p&gt;
&lt;p&gt;🌱 当然 &lt;strong&gt;Gridea&lt;/strong&gt; 还很年轻，有很多不足，但请相信，它会不停向前 🏃&lt;/p&gt;
&lt;p&gt;未来，它一定会成为你离不开的伙伴&lt;/p&gt;
&lt;p&gt;尽情发挥你的才华吧！&lt;/p&gt;
&lt;p&gt;😘 Enjoy~&lt;/p&gt;
">Hello Gridea</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //拿来主义(真香)^_^，Clipboard 实现摘自掘金 https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        console.log('复制操作频率过高');
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>


<script src="/media/js/mouse/peace.js"></script>


</html>